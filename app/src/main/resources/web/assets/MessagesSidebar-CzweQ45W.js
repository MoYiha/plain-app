import{_ as L}from"./LeftSidebar.vuevuetypescriptsetuptruelang-Bwcxwg_R.js";import{_ as M}from"./TagFilter.vuevuetypescriptsetuptruelang-nDSyeZ_O.js";import{e as N,f as V,s as I,g as Q,K as z,r as m,N as R,w as x,J as A,o as u,q as g,a6 as y,a4 as D,a7 as G,a as t,k as j,c as _,z as h,T as C,j as S,t as a,l as k,V as E,U as F,G as J,C as K,B,D as P}from"./index-DRp6xo3j.js";import{u as U}from"./search-VN1T4MU3.js";const H={class:"nav"},O={class:"title"},W={key:0,class:"count"},X=["onClick"],Y={class:"title"},Z={key:0,class:"count"},ce=N({__name:"MessagesSidebar",setup(ee){const d=V(),{counter:p}=I(Q()),{parseQ:$}=U(),o=z({tagIds:[]}),n=m(""),c=m(""),l=m(new Map),{fetch:T}=R({handle:e=>{e&&(p.value.messages=e.total,l.value.set("1",e.inbox),l.value.set("2",e.sent),l.value.set("3",e.drafts))},document:G,variables:()=>({})});function v(e){return l.value.get(e)??-1}function f(){var i;const e=y.currentRoute.value,r=D(((i=e.query.q)==null?void 0:i.toString())??"");$(o,r),n.value=o.type??"",c.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(c.value=""),T()}f(),x(()=>y.currentRoute.value,()=>{f()});function b(e){const r=K([{name:"type",op:"",value:e}]);B(d,`/messages?q=${P(r)}`)}function q(){B(d,"/messages")}return(e,r)=>{const i=M,w=L;return u(),A(w,null,{title:g(()=>[J(a(e.$t("page_title.messages")),1)]),body:g(()=>[t("ul",H,[t("li",{class:C({active:!c.value&&!n.value}),onClick:h(q,["prevent"])},[t("span",O,a(e.$t("all")),1),k(p).messages>=0?(u(),_("span",W,a(k(p).messages.toLocaleString()),1)):S("",!0)],2),(u(),_(F,null,E(["1","2","3"],s=>t("li",{key:s,class:C({active:s===n.value}),onClick:h(se=>b(s),["prevent"])},[t("span",Y,a(e.$t(`message_type.${s}`)),1),v(s)>=0?(u(),_("span",Z,a(v(s).toLocaleString()),1)):S("",!0)],10,X)),64))]),j(i,{type:"SMS",selected:c.value},null,8,["selected"])]),_:1})}}});export{ce as default};
