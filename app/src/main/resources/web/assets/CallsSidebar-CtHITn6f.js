import{_ as N}from"./LeftSidebar.vuevuetypescriptsetuptruelang-CbCF_-pF.js";import{_ as V}from"./TagFilter.vuevuetypescriptsetuptruelang-BkMRTiB-.js";import{d as I,e as Q,s as A,f as D,D as R,r as p,G as x,w as z,ac as G,a0 as h,ad as j,L as E,o as u,a1 as C,a2 as k,$ as F,ae as H,a,j as O,c as _,x as S,M as $,h as L,t as s,k as B,O as P,N as U,V as J,a4 as K,y as w,a5 as W}from"./index-Dohfv8Fq.js";import{u as X}from"./search-BGPnRmZx.js";import"./more-vert-XVOmELru.js";import"./EditValueModal-BR2lNZFL.js";import"./vee-validate-BgwL6Mce.js";const Y={class:"nav"},Z={class:"title"},ee={key:0,class:"count"},te=["onClick"],ae={class:"title"},se={key:0,class:"count"},_e=I({__name:"CallsSidebar",setup(oe){const m=Q(),{counter:d}=A(D()),{parseQ:T}=X(),o=R({tagIds:[]}),n=p(""),l=p(""),c=p(new Map),{fetch:f}=x({handle:e=>{e&&(d.value.calls=e.total,c.value.set("1",e.incoming),c.value.set("2",e.outgoing),c.value.set("3",e.missed))},document:H,variables:()=>({})});function v(e){return c.value.get(e)??-1}function y(){var i;const e=k.currentRoute.value,r=F(((i=e.query.q)==null?void 0:i.toString())??"");T(o,r),n.value=o.type??"",l.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(l.value=""),f()}y(),z(()=>k.currentRoute.value,()=>{y()});function b(e){const r=K([{name:"type",op:"",value:e}]);w(m,`/calls?q=${W(r)}`)}function q(){w(m,"/calls")}const g=()=>{f()};return G(()=>{h.on("calls_deleted",g)}),j(()=>{h.off("calls_deleted",g)}),(e,r)=>{const i=V,M=N;return u(),E(M,null,{title:C(()=>[J(s(e.$t("page_title.calls")),1)]),body:C(()=>[a("ul",Y,[a("li",{class:$({active:!l.value&&!n.value}),onClick:S(q,["prevent"])},[a("span",Z,s(e.$t("all")),1),B(d).calls>=0?(u(),_("span",ee,s(B(d).calls.toLocaleString()),1)):L("",!0)],2),(u(),_(U,null,P(["1","2","3"],t=>a("li",{key:t,class:$({active:t===n.value}),onClick:S(ne=>b(t),["prevent"])},[a("span",ae,s(e.$t(`call_type.${t}`)),1),v(t)>=0?(u(),_("span",se,s(v(t).toLocaleString()),1)):L("",!0)],10,te)),64))]),O(i,{type:"CALL",selected:l.value},null,8,["selected"])]),_:1})}}});export{_e as default};
