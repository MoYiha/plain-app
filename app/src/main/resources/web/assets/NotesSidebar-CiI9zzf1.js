import{_ as N}from"./LeftSidebar.vuevuetypescriptsetuptruelang-CbCF_-pF.js";import{_ as q}from"./TagFilter.vuevuetypescriptsetuptruelang-BkMRTiB-.js";import{d as L,e as V,s as I,f as M,D as Q,r as f,G as A,w as R,ac as x,a0 as h,ad as z,L as D,o as i,a1 as v,a2 as g,$ as E,bo as G,a as s,j,x as y,M as S,c as T,h as k,t as a,k as l,V as H,a4 as O,y as C,a5 as P}from"./index-Dohfv8Fq.js";import{u as U}from"./search-BGPnRmZx.js";import"./more-vert-XVOmELru.js";import"./EditValueModal-BR2lNZFL.js";import"./vee-validate-BgwL6Mce.js";const F={class:"nav"},J={class:"title"},K={key:0,class:"count"},W={class:"title"},X={key:0,class:"count"},re=L({__name:"NotesSidebar",setup(Y){const u=V(),{counter:t}=I(M()),{parseQ:$}=U(),o=Q({tagIds:[]}),n=f(!1),r=f(""),{fetch:d}=A({handle:e=>{e&&(t.value.notes=e.total,t.value.notesTrash=e.trash)},document:G,variables:()=>({})});function _(){var c;const e=g.currentRoute.value,m=E(((c=e.query.q)==null?void 0:c.toString())??"");$(o,m),r.value=o.tagIds.length===1?o.tagIds[0]:"",n.value=o.trash??!1,n.value&&(r.value=""),d()}_(),R(()=>g.currentRoute.value,()=>{_()});function b(){const e=O([{name:"trash",op:"",value:"true"}]);C(u,`/notes?q=${P(e)}`)}function w(){C(u,"/notes")}const p=()=>{d()};return x(()=>{h.on("notes_actioned",p)}),z(()=>{h.off("notes_actioned",p)}),(e,m)=>{const c=q,B=N;return i(),D(B,null,{title:v(()=>[H(a(e.$t("page_title.notes")),1)]),body:v(()=>[s("ul",F,[s("li",{class:S({active:!r.value&&!n.value}),onClick:y(w,["prevent"])},[s("span",J,a(e.$t("all")),1),l(t).notes>=0?(i(),T("span",K,a(l(t).notes.toLocaleString()),1)):k("",!0)],2),s("li",{class:S({active:n.value}),onClick:y(b,["prevent"])},[s("span",W,a(e.$t("trash")),1),l(t).notesTrash>=0?(i(),T("span",X,a(l(t).notesTrash.toLocaleString()),1)):k("",!0)],2)]),j(c,{type:"NOTE",selected:r.value},null,8,["selected"])]),_:1})}}});export{re as default};
