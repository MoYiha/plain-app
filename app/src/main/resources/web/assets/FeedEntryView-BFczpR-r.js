import{m as tt,c as s,o,a,e as et,u as nt,r as m,I as st,s as ot,g as at,J as it,f as lt,i as V,D as h,h as dt,K as ct,L as rt,j as C,l,d as ut,p as d,k as c,y as u,t as q,M as vt,X as _t,Y as pt,Z as mt,W as ft,N as yt,cm as kt,cn as gt,cc as bt,bc as Tt,co as wt,z as H,$ as ht,a0 as Ct,a2 as f,F as qt}from"./index-H9YOjX-Y.js";import{_ as $t}from"./print-outline-rounded-DvcH-jiL.js";import{a as Ft,_ as Lt}from"./add-notes-outline-rounded-BA8yzQv8.js";import{u as xt}from"./markdown-9NTK5H0b.js";import{u as Dt}from"./feeds-BA1WFYeh.js";const Et={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Mt(Q,r){return o(),s("svg",Et,r[0]||(r[0]=[a("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1)]))}const Nt=tt({name:"material-symbols-open-in-new-rounded",render:Mt}),Vt={class:"content"},Ht={key:0},Qt={key:1},St={class:"top-app-bar"},zt={class:"title"},At={key:1},Bt={key:2,indeterminate:"",class:"spinner-sm"},Gt=["disabled"],Rt=["href"],It={class:"btn-icon sm"},Kt={class:"actions"},Ut={class:"article-title"},Yt=["innerHTML"],v="FEED_ENTRY",jt=et({__name:"FeedEntryView",setup(Q){const{t:r}=nt(),$=st(),y=m($.params.id),n=m(),_=m(""),k=m(),{app:S,urlTokenKey:z}=ot(at()),{render:F}=xt(S,z),{loading:A,fetch:g}=it({handle:async(e,t)=>{t?h(r(t),"error"):(n.value=e.feedEntry,n.value?_.value=await F(e.feedEntry.content||e.feedEntry.description):_.value="")},document:gt,variables:()=>({id:y.value})}),b=lt(),{viewFeed:B}=Dt(b);function G(){const e=$.query.q;e?H(b,`/feeds?q=${e}`):H(b,"/feeds")}const{mutate:R,loading:Jt,onDone:I}=V({document:bt});I(()=>{h(r("saved"))}),dt({handle:(e,t)=>{t?h(r(t),"error"):e&&(k.value=e.tags)},document:Tt,variables:{type:v}});const K=()=>{window.print()};function U(){var e,t;ht(Ct,{type:v,tags:k.value,item:{key:(e=n.value)==null?void 0:e.id,title:"",size:0},selected:(t=k.value)==null?void 0:t.filter(T=>{var p;return(p=n.value)==null?void 0:p.tags.some(w=>w.id===T.id)})})}const{mutate:Y,loading:L,onDone:j}=V({document:wt});j(async e=>{const t=e.data;n.value=t.syncFeedContent,_.value=await F(t.syncFeedContent.content||t.syncFeedContent.description)});const J=()=>{Y({id:y.value})},x=e=>{e.type===v&&g()},D=e=>{e.type===v&&g()};return ct(()=>{f.on("item_tags_updated",D),f.on("items_tags_updated",x),g()}),rt(()=>{f.off("item_tags_updated",D),f.off("items_tags_updated",x)}),(e,t)=>{var E,M,N;const T=ft,p=yt,w=Ft,P=Nt,W=Lt,X=$t,Z=kt,i=vt("tooltip");return o(),s("div",Vt,[l(A)&&!n.value?(o(),s("article",Ht,t[2]||(t[2]=[ut('<div class="top-app-bar" data-v-15a7315f><div class="title" data-v-15a7315f><div class="skeleton-text skeleton-app-bar" data-v-15a7315f></div></div><div class="actions" data-v-15a7315f><div class="skeleton-image skeleton-icon" data-v-15a7315f></div></div></div><div class="article-title" data-v-15a7315f><div class="skeleton-text skeleton-title" data-v-15a7315f></div></div><div class="md-container" data-v-15a7315f><div class="skeleton-text skeleton-content" style="width:100%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:90%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:75%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:85%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:60%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:80%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:70%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:65%;" data-v-15a7315f></div></div>',3)]))):n.value?(o(),s("article",Qt,[a("div",St,[a("div",zt,[n.value.feed?(o(),s("a",{key:0,onClick:t[0]||(t[0]=u(O=>l(B)(n.value.feed),["stop","prevent"]))},q(n.value.feed.name),1)):C("",!0),n.value?d((o(),s("time",At,[pt(q(l(mt)(n.value.publishedAt)),1)])),[[i,l(_t)(n.value.publishedAt)]]):C("",!0),c(T,{tags:(E=n.value)==null?void 0:E.tags,type:v},null,8,["tags"]),d((o(),s("button",{class:"btn-icon sm",style:{"margin-inline-start":"16px"},onClick:u(U,["prevent"])},[t[3]||(t[3]=a("md-ripple",null,null,-1)),c(p)])),[[i,e.$t("add_to_tags")]]),l(L)?(o(),s("md-circular-progress",Bt)):d((o(),s("button",{key:3,class:"btn-icon sm",disabled:l(L),onClick:u(J,["prevent"])},[t[4]||(t[4]=a("md-ripple",null,null,-1)),c(w)],8,Gt)),[[i,e.$t("sync_content")]]),d((o(),s("a",{href:(M=n.value)==null?void 0:M.url,class:"btn-icon",target:"_blank"},[a("button",It,[t[5]||(t[5]=a("md-ripple",null,null,-1)),c(P)])],8,Rt)),[[i,e.$t("view_original_article")]]),d((o(),s("button",{class:"btn-icon sm",onClick:t[1]||(t[1]=u(O=>l(R)({query:`ids:${y.value}`}),["prevent"]))},[t[6]||(t[6]=a("md-ripple",null,null,-1)),c(W)])),[[i,e.$t("save_to_notes")]]),d((o(),s("button",{class:"btn-icon sm",onClick:u(K,["prevent"])},[t[7]||(t[7]=a("md-ripple",null,null,-1)),c(X)])),[[i,e.$t("print")]])]),a("div",Kt,[d((o(),s("button",{class:"btn-icon",onClick:u(G,["prevent"])},[t[8]||(t[8]=a("md-ripple",null,null,-1)),c(Z)])),[[i,e.$t("close")]])])]),a("div",Ut,q((N=n.value)==null?void 0:N.title),1),a("div",{class:"md-container",innerHTML:_.value},null,8,Yt)])):C("",!0)])}}}),te=qt(jt,[["__scopeId","data-v-15a7315f"]]);export{te as default};
