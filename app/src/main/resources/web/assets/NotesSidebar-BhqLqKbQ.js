import{_ as q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-B2DTyU_S.js";import{_ as I}from"./TagFilter-g5V5BBTg.js";import{e as L,f as $,s as A,g as Q,I as R,r as f,L as V,w as M,ad as z,a4 as h,ae as E,R as j,o as i,p as v,a5 as g,a3 as x,bt as D,a as s,k as F,y,S,c as T,j as k,t as a,l,F as G,B as H,A as C,C as O}from"./index-CextXMl7.js";import{u as P}from"./search-CYaYXsFn.js";import"./more-vert-PFQlu6Bi.js";import"./VIconButton.vuevuetypescriptsetuptruelang-BlGK_fBO.js";const U={class:"nav"},J={class:"title"},K={key:0,class:"count"},W={class:"title"},X={key:0,class:"count"},ne=L({__name:"NotesSidebar",setup(Y){const u=$(),{counter:t}=A(Q()),{parseQ:B}=P(),o=R({tagIds:[]}),n=f(!1),r=f(""),{fetch:d}=V({handle:e=>{e&&(t.value.notes=e.total,t.value.notesTrash=e.trash)},document:D,variables:()=>({})});function _(){var c;const e=g.currentRoute.value,m=x(((c=e.query.q)==null?void 0:c.toString())??"");B(o,m),r.value=o.tagIds.length===1?o.tagIds[0]:"",n.value=o.trash??!1,n.value&&(r.value=""),d()}_(),M(()=>g.currentRoute.value,()=>{_()});function b(){const e=H([{name:"trash",op:"",value:"true"}]);C(u,`/notes?q=${O(e)}`)}function w(){C(u,"/notes")}const p=()=>{d()};return z(()=>{h.on("notes_actioned",p)}),E(()=>{h.off("notes_actioned",p)}),(e,m)=>{const c=I,N=q;return i(),j(N,null,{title:v(()=>[G(a(e.$t("page_title.notes")),1)]),body:v(()=>[s("ul",U,[s("li",{class:S({active:!r.value&&!n.value}),onClick:y(w,["prevent"])},[s("span",J,a(e.$t("all")),1),l(t).notes>=0?(i(),T("span",K,a(l(t).notes.toLocaleString()),1)):k("",!0)],2),s("li",{class:S({active:n.value}),onClick:y(b,["prevent"])},[s("span",W,a(e.$t("trash")),1),l(t).notesTrash>=0?(i(),T("span",X,a(l(t).notesTrash.toLocaleString()),1)):k("",!0)],2)]),F(c,{type:"NOTE",selected:r.value},null,8,["selected"])]),_:1})}}});export{ne as default};
