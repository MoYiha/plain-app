import{_ as E}from"./more-vert-XZtlvs7x.js";import{o as s,c as i,a as t,d as H,g as I,u as z,h as m,l as F,C as P,b5 as j,a_ as O,a1 as u,a$ as U,S as Z,p as v,t as d,x as C,w as h,O as k,P as x,N as J,Z as g,j as q,ce as K,cf as R,ad as W,cg as X,a7 as Y,f as ee,ch as te,a8 as ne,a2 as oe}from"./index-B-S542RM.js";import{E as M}from"./EditValueModal-u3M261_O.js";const ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},se=t("path",{fill:"currentColor",d:"M11 13H6q-.425 0-.712-.288T5 12t.288-.712T6 11h5V6q0-.425.288-.712T12 5t.713.288T13 6v5h5q.425 0 .713.288T19 12t-.288.713T18 13h-5v5q0 .425-.288.713T12 19t-.712-.288T11 18z"},null,-1),ie=[se];function le(p,a){return s(),i("svg",ae,[...ie])}const de={name:"material-symbols-add-rounded",render:le},ce={class:"top-app-bar"},re={class:"btn-icon no-click"},ue={class:"title"},pe={class:"actions"},_e=t("md-ripple",null,null,-1),me={class:"nav"},ve=["onClick"],he={class:"title"},ge=["id","onClick"],fe=t("md-ripple",null,null,-1),ye={class:"count"},be=["anchor","open"],Te={slot:"headline"},$e={slot:"headline"},Me=H({__name:"TagFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(p){const a=p,{t:l}=I(),w=z(),f=m([]),_=m(!1),c=m(),{refetch:r}=F({handle:(e,n)=>{n?P(l(n),"error"):e&&(f.value=e.tags)},document:j,variables:{type:a.type},appApi:!0});function S(e){c.value=e,_.value=!0}function V(e){g(M,{title:l("rename"),placeholder:l("name"),value:e.name,mutation:()=>q({document:K,appApi:!0}),getVariables:n=>({id:e.id,name:n}),done:()=>{r()}})}function L(e){g(W,{id:e.id,name:e.name,gql:R,appApi:!0,typeName:"Tag"})}function Q(){g(M,{title:l("add_tag"),placeholder:l("name"),mutation:()=>q({document:X,options:{update:()=>{r()}},appApi:!0}),getVariables:e=>({type:a.type,name:e})})}function A(e){const n=Y([{name:"tag_id",op:"",value:e.id}]);ee(w,`/${te[a.type]}?q=${ne(n)}`)}const y=e=>{e===a.type&&r()},b=e=>{e.type===a.type&&r()};return O(()=>{u.on("refetch_tags",y),u.on("media_items_actioned",b)}),U(()=>{u.off("refetch_tags",y),u.off("media_items_actioned",b)}),(e,n)=>{var $;const B=oe,D=de,G=E,T=Z("tooltip");return s(),i(k,null,[t("div",ce,[t("div",re,[v(B)]),t("div",ue,d(e.$t("tags")),1),t("div",pe,[C((s(),i("button",{class:"btn-icon",onClick:h(Q,["prevent"])},[_e,v(D)])),[[T,e.$t("add_tag")]])])]),t("ul",me,[(s(!0),i(k,null,x(f.value,o=>(s(),i("li",{onClick:h(N=>A(o),["prevent"]),key:o.id,class:J({active:o.id===p.selected})},[t("span",he,d(o.name),1),C((s(),i("button",{id:"tag-"+o.id,class:"btn-icon sm",onClick:h(N=>S(o),["prevent","stop"])},[fe,v(G)],8,ge)),[[T,e.$t("actions")]]),t("span",ye,d(o.count.toLocaleString()),1)],10,ve))),128))]),t("md-menu",{positioning:"popover",anchor:"tag-"+(($=c.value)==null?void 0:$.id),"stay-open-on-focusout":"",quick:"",open:_.value,onClosed:n[2]||(n[2]=o=>_.value=!1)},[t("md-menu-item",{onClick:n[0]||(n[0]=o=>V(c.value))},[t("div",Te,d(e.$t("rename")),1)]),t("md-menu-item",{onClick:n[1]||(n[1]=o=>L(c.value))},[t("div",$e,d(e.$t("delete")),1)])],40,be)],64)}}});export{Me as _,de as a};
