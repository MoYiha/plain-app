import{_ as P}from"./more-vert-CNai-21a.js";import{o as s,c as u,a as n,d as z,g as F,u as j,h as m,l as x,C as O,b9 as U,af as Z,a1 as r,ag as J,S as K,p as v,t as l,x as k,v as q,q as M,w as g,O as w,P as R,N as W,Z as h,j as S,b_ as X,b$ as Y,ad as ee,c0 as te,a7 as ne,f as ae,c1 as oe,a8 as se,a2 as ie,aP as le}from"./index-W0C8ZaaK.js";import{E as V}from"./EditValueModal-BJTvyhUn.js";const ce={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},de=n("path",{fill:"currentColor",d:"M11 13H6q-.425 0-.712-.288T5 12t.288-.712T6 11h5V6q0-.425.288-.712T12 5t.713.288T13 6v5h5q.425 0 .713.288T19 12t-.288.713T18 13h-5v5q0 .425-.288.713T12 19t-.712-.288T11 18z"},null,-1),re=[de];function ue(_,o){return s(),u("svg",ce,[...re])}const _e={name:"material-symbols-add-rounded",render:ue},pe={class:"top-app-bar"},me={class:"btn-icon no-click"},ve={class:"title"},ge={class:"actions"},he={class:"nav"},fe=["onClick"],ye={class:"title"},$e={class:"count"},be=["anchor","open"],Te={slot:"headline"},Ce={slot:"headline"},we=z({__name:"TagFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(_){const o=_,{t:i}=F(),B=j(),f=m([]),p=m(!1),c=m(),{refetch:d}=x({handle:(e,t)=>{t?O(i(t),"error"):e&&(f.value=e.tags)},document:U,variables:{type:o.type},appApi:!0});function L(e){c.value=e,p.value=!0}function Q(e){h(V,{title:i("rename"),placeholder:i("name"),value:e.name,mutation:()=>S({document:X,appApi:!0}),getVariables:t=>({id:e.id,name:t}),done:()=>{d()}})}function A(e){h(ee,{id:e.id,name:e.name,gql:Y,appApi:!0,typeName:"Tag"})}function D(){h(V,{title:i("add_tag"),placeholder:i("name"),mutation:()=>S({document:te,options:{update:()=>{d()}},appApi:!0}),getVariables:e=>({type:o.type,name:e})})}function G(e){const t=ne([{name:"tag_id",op:"",value:e.id}]);ae(B,`/${oe[o.type]}?q=${se(t)}`)}const y=e=>{e===o.type&&d()},$=e=>{e.type===o.type&&d()};return Z(()=>{r.on("refetch_tags",y),r.on("media_items_actioned",$)}),J(()=>{r.off("refetch_tags",y),r.off("media_items_actioned",$)}),(e,t)=>{var C;const N=ie,E=_e,b=le,H=P,T=K("tooltip");return s(),u(w,null,[n("div",pe,[n("div",me,[v(N)]),n("div",ve,l(e.$t("tags")),1),n("div",ge,[k((s(),q(b,{onClick:g(D,["prevent"])},{icon:M(()=>[v(E)]),_:1})),[[T,e.$t("add_tag")]])])]),n("ul",he,[(s(!0),u(w,null,R(f.value,a=>(s(),u("li",{onClick:g(I=>G(a),["prevent"]),key:a.id,class:W({active:a.id===_.selected})},[n("span",ye,l(a.name),1),k((s(),q(b,{id:"tag-"+a.id,class:"sm",onClick:g(I=>L(a),["prevent","stop"])},{icon:M(()=>[v(H)]),_:2},1032,["id","onClick"])),[[T,e.$t("actions")]]),n("span",$e,l(a.count.toLocaleString()),1)],10,fe))),128))]),n("md-menu",{positioning:"popover",anchor:"tag-"+((C=c.value)==null?void 0:C.id),"stay-open-on-focusout":"",quick:"",open:p.value,onClosed:t[2]||(t[2]=a=>p.value=!1)},[n("md-menu-item",{onClick:t[0]||(t[0]=a=>Q(c.value))},[n("div",Te,l(e.$t("rename")),1)]),n("md-menu-item",{onClick:t[1]||(t[1]=a=>A(c.value))},[n("div",Ce,l(e.$t("delete")),1)])],40,be)],64)}}});export{we as _,_e as a};
