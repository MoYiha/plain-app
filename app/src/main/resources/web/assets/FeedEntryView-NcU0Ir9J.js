import{m as et,c as n,o as a,a as c,e as st,u as at,r as p,M as nt,s as ot,g as it,N as dt,f as lt,i as V,F as w,h as ct,O as rt,P as _t,j as C,l as i,d as vt,Q as d,k as l,J as ut,z as _,t as q,R as mt,a0 as pt,G as yt,a1 as ft,$ as gt,S as kt,cC as ht,cD as bt,cs as Tt,bk as wt,cE as Ct,Z as qt,B as Q,a2 as $t,a3 as Et,a5 as y,I as Ft}from"./index-DRp6xo3j.js";import{_ as xt}from"./print-outline-rounded-CG3OuEWH.js";import{a as Dt,_ as Lt}from"./add-notes-outline-rounded-DfdtNEgc.js";import{u as Mt}from"./markdown-x8nGVkF0.js";import{u as Nt}from"./feeds-92enUHJ0.js";const Vt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Qt(S,r){return a(),n("svg",Vt,r[0]||(r[0]=[c("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1)]))}const St=et({name:"material-symbols-open-in-new-rounded",render:Qt}),Bt={class:"content"},Ht={key:0},zt={key:1},Gt={class:"top-app-bar"},Rt={class:"title"},At={key:1},It=["disabled"],Pt=["href"],Ut={class:"btn-icon sm"},jt={class:"actions"},Jt={class:"article-title"},Kt=["innerHTML"],v="FEED_ENTRY",Ot=st({__name:"FeedEntryView",setup(S){const{t:r}=at(),$=nt(),f=p($.params.id),s=p(),u=p(""),g=p(),{app:B,urlTokenKey:H}=ot(it()),{render:E}=Mt(B,H),{loading:z,fetch:k}=dt({handle:async(t,e)=>{e?w(r(e),"error"):(s.value=t.feedEntry,s.value?u.value=await E(t.feedEntry.content||t.feedEntry.description):u.value="")},document:bt,variables:()=>({id:f.value})}),h=lt(),{viewFeed:G}=Nt(h);function R(){const t=$.query.q;t?Q(h,`/feeds?q=${t}`):Q(h,"/feeds")}const{mutate:A,loading:Yt,onDone:I}=V({document:Tt});I(()=>{w(r("saved"))}),ct({handle:(t,e)=>{e?w(r(e),"error"):t&&(g.value=t.tags)},document:wt,variables:{type:v}});const P=()=>{window.print()};function U(){var t,e;$t(Et,{type:v,tags:g.value,item:{key:(t=s.value)==null?void 0:t.id,title:"",size:0},selected:(e=g.value)==null?void 0:e.filter(b=>{var m;return(m=s.value)==null?void 0:m.tags.some(T=>T.id===b.id)})})}const{mutate:j,loading:F,onDone:J}=V({document:Ct});J(async t=>{const e=t.data;s.value=e.syncFeedContent,u.value=await E(e.syncFeedContent.content||e.syncFeedContent.description)});const K=()=>{j({id:f.value})},x=t=>{t.type===v&&k()},D=t=>{t.type===v&&k()};return rt(()=>{y.on("item_tags_updated",D),y.on("items_tags_updated",x),k()}),_t(()=>{y.off("item_tags_updated",D),y.off("items_tags_updated",x)}),(t,e)=>{var L,M,N;const b=gt,m=kt,T=qt,O=Dt,Y=St,Z=Lt,W=xt,X=ht,o=mt("tooltip");return a(),n("div",Bt,[i(z)&&!s.value?(a(),n("article",Ht,e[2]||(e[2]=[vt('<div class="top-app-bar" data-v-a6a84543><div class="title" data-v-a6a84543><div class="skeleton-text lg" style="width:40%;" data-v-a6a84543></div></div><div class="actions" data-v-a6a84543><div class="skeleton-image sm" data-v-a6a84543></div></div></div><div class="article-title" data-v-a6a84543><div class="skeleton-text lg" style="width:60%;" data-v-a6a84543></div></div><div class="md-container md-skeleton-container" data-v-a6a84543><div class="skeleton-text" style="width:100%;" data-v-a6a84543></div><div class="skeleton-text" style="width:90%;" data-v-a6a84543></div><div class="skeleton-text" style="width:75%;" data-v-a6a84543></div><div class="skeleton-text" style="width:85%;" data-v-a6a84543></div><div class="skeleton-text" style="width:60%;" data-v-a6a84543></div><div class="skeleton-text" style="width:80%;" data-v-a6a84543></div><div class="skeleton-text" style="width:70%;" data-v-a6a84543></div><div class="skeleton-text" style="width:65%;" data-v-a6a84543></div></div>',3)]))):s.value?(a(),n("article",zt,[c("div",Gt,[c("div",Rt,[s.value.feed?(a(),n("a",{key:0,onClick:e[0]||(e[0]=_(tt=>i(G)(s.value.feed),["stop","prevent"]))},q(s.value.feed.name),1)):C("",!0),s.value?d((a(),n("time",At,[yt(q(i(ft)(s.value.publishedAt)),1)])),[[o,i(pt)(s.value.publishedAt)]]):C("",!0),l(b,{tags:(L=s.value)==null?void 0:L.tags,type:v},null,8,["tags"]),d((a(),n("button",{class:"btn-icon sm",style:{"margin-inline-start":"16px"},onClick:_(U,["prevent"])},[l(m)])),[[o,t.$t("add_to_tags")]]),i(F)?(a(),ut(T,{key:2,indeterminate:"",class:"sm"})):d((a(),n("button",{key:3,class:"btn-icon sm",disabled:i(F),onClick:_(K,["prevent"])},[l(O)],8,It)),[[o,t.$t("sync_content")]]),d((a(),n("a",{href:(M=s.value)==null?void 0:M.url,class:"btn-icon",target:"_blank"},[c("button",Ut,[l(Y)])],8,Pt)),[[o,t.$t("view_original_article")]]),d((a(),n("button",{class:"btn-icon sm",onClick:e[1]||(e[1]=_(tt=>i(A)({query:`ids:${f.value}`}),["prevent"]))},[l(Z)])),[[o,t.$t("save_to_notes")]]),d((a(),n("button",{class:"btn-icon sm",onClick:_(P,["prevent"])},[l(W)])),[[o,t.$t("print")]])]),c("div",jt,[d((a(),n("button",{class:"btn-icon",onClick:_(R,["prevent"])},[l(X)])),[[o,t.$t("close")]])])]),c("div",Jt,q((N=s.value)==null?void 0:N.title),1),c("div",{class:"md-container",innerHTML:u.value},null,8,Kt)])):C("",!0)])}}}),se=Ft(Ot,[["__scopeId","data-v-a6a84543"]]);export{se as default};
