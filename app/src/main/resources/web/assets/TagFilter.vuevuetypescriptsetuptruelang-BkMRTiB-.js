import{_ as A}from"./more-vert-XVOmELru.js";import{m as F,c as u,o as s,a as n,d as j,u as x,e as J,r as p,g as K,ba as O,A as P,ac as R,a0 as r,ad as U,j as v,K as Y,t as l,n as C,J as W,L as M,aM as X,x as g,a1 as q,N as w,O as Z,M as ee,Y as f,aa as te,a4 as ne,y as ae,c1 as oe,a5 as se,i as L,c2 as ie,c3 as le,c4 as ce}from"./index-Dohfv8Fq.js";import{E as V}from"./EditValueModal-BR2lNZFL.js";const de={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function re(m,o){return s(),u("svg",de,o[0]||(o[0]=[n("path",{fill:"currentColor",d:"M11 13H6q-.425 0-.712-.288T5 12t.288-.712T6 11h5V6q0-.425.288-.712T12 5t.713.288T13 6v5h5q.425 0 .713.288T19 12t-.288.713T18 13h-5v5q0 .425-.288.713T12 19t-.712-.288T11 18z"},null,-1)]))}const ue=F({name:"material-symbols-add-rounded",render:re}),me={class:"top-app-bar"},_e={class:"btn-icon no-click"},pe={class:"title"},ve={class:"actions"},ge={class:"nav"},fe=["onClick"],he={class:"title"},ye={class:"count"},Te=["anchor","open"],be={slot:"headline"},ke={slot:"headline"},qe=j({__name:"TagFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(m){const o=m,{t:i}=x(),B=J(),h=p([]),_=p(!1),c=p(),{refetch:d}=K({handle:(e,t)=>{t?P(i(t),"error"):e&&(h.value=e.tags)},document:O,variables:{type:o.type}});function Q(e){c.value=e,_.value=!0}function S(e){f(V,{title:i("rename"),placeholder:i("name"),value:e.name,mutation:()=>L({document:ie}),getVariables:t=>({id:e.id,name:t}),done:()=>{d()}})}function D(e){f(te,{id:e.id,name:e.name,gql:le,typeName:"Tag"})}function G(){f(V,{title:i("add_tag"),placeholder:i("name"),mutation:()=>L({document:ce,options:{update:()=>{d()}}}),getVariables:e=>({type:o.type,name:e})})}function N(e){const t=ne([{name:"tag_id",op:"",value:e.id}]);ae(B,`/${oe[o.type]}?q=${se(t)}`)}const y=e=>{e===o.type&&d()},T=e=>{e.type===o.type&&d()};return R(()=>{r.on("refetch_tags",y),r.on("media_items_actioned",T)}),U(()=>{r.off("refetch_tags",y),r.off("media_items_actioned",T)}),(e,t)=>{var $;const E=Y,H=ue,b=X,I=A,k=W("tooltip");return s(),u(w,null,[n("div",me,[n("div",_e,[v(E)]),n("div",pe,l(e.$t("tags")),1),n("div",ve,[C((s(),M(b,{onClick:g(G,["prevent"])},{icon:q(()=>[v(H)]),_:1})),[[k,e.$t("add_tag")]])])]),n("ul",ge,[(s(!0),u(w,null,Z(h.value,a=>(s(),u("li",{key:a.id,class:ee({active:a.id===m.selected}),onClick:g(z=>N(a),["prevent"])},[n("span",he,l(a.name),1),C((s(),M(b,{id:"tag-"+a.id,class:"sm",onClick:g(z=>Q(a),["prevent","stop"])},{icon:q(()=>[v(I)]),_:2},1032,["id","onClick"])),[[k,e.$t("actions")]]),n("span",ye,l(a.count.toLocaleString()),1)],10,fe))),128))]),n("md-menu",{positioning:"popover",anchor:"tag-"+(($=c.value)==null?void 0:$.id),"stay-open-on-focusout":"",quick:"",open:_.value,onClosed:t[2]||(t[2]=a=>_.value=!1)},[n("md-menu-item",{onClick:t[0]||(t[0]=a=>S(c.value))},[n("div",be,l(e.$t("rename")),1)]),n("md-menu-item",{onClick:t[1]||(t[1]=a=>D(c.value))},[n("div",ke,l(e.$t("delete")),1)])],40,Te)],64)}}});export{qe as _,ue as a};
