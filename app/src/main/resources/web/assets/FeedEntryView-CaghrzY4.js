import{m as tt,c as s,o as a,a as o,d as et,u as nt,r as m,F as st,s as at,f as ot,G as it,e as lt,i as V,A as h,g as dt,H as ct,I as rt,h as C,k as l,X as ut,n as d,j as c,x as u,t as q,J as vt,U as _t,V as pt,W as mt,T as ft,K as yt,cj as kt,ck as gt,c9 as bt,ba as Tt,cl as wt,y as H,Y as ht,Z as Ct,a0 as f,C as qt}from"./index-Dohfv8Fq.js";import{u as xt,_ as Ft}from"./markdown-DGqQAVjS.js";import{a as $t,_ as Et}from"./add-notes-outline-rounded-BZvnlf5C.js";import{u as Lt}from"./feeds-C8QCcad_.js";const Dt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function Mt(Q,r){return a(),s("svg",Dt,r[0]||(r[0]=[o("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1)]))}const Nt=tt({name:"material-symbols-open-in-new-rounded",render:Mt}),Vt={class:"content"},Ht={key:0},Qt={key:1},St={class:"top-app-bar"},At={class:"title"},Gt={key:1},zt={key:2,indeterminate:"",class:"spinner-sm"},Bt=["disabled"],Rt=["href"],It={class:"btn-icon sm"},Ut={class:"actions"},jt={class:"article-title"},Kt=["innerHTML"],v="FEED_ENTRY",Yt=et({__name:"FeedEntryView",setup(Q){const{t:r}=nt(),x=st(),y=m(x.params.id),n=m(),_=m(""),k=m(),{app:S,urlTokenKey:A}=at(ot()),{render:F}=xt(S,A),{loading:G,fetch:g}=it({handle:async(e,t)=>{t?h(r(t),"error"):(n.value=e.feedEntry,n.value?_.value=await F(e.feedEntry.content||e.feedEntry.description):_.value="")},document:gt,variables:()=>({id:y.value})}),b=lt(),{viewFeed:z}=Lt(b);function B(){const e=x.query.q;e?H(b,`/feeds?q=${e}`):H(b,"/feeds")}const{mutate:R,loading:Jt,onDone:I}=V({document:bt});I(()=>{h(r("saved"))}),dt({handle:(e,t)=>{t?h(r(t),"error"):e&&(k.value=e.tags)},document:Tt,variables:{type:v}});const U=()=>{window.print()};function j(){var e,t;ht(Ct,{type:v,tags:k.value,item:{key:(e=n.value)==null?void 0:e.id,title:"",size:0},selected:(t=k.value)==null?void 0:t.filter(T=>{var p;return(p=n.value)==null?void 0:p.tags.some(w=>w.id===T.id)})})}const{mutate:K,loading:$,onDone:Y}=V({document:wt});Y(async e=>{const t=e.data;n.value=t.syncFeedContent,_.value=await F(t.syncFeedContent.content||t.syncFeedContent.description)});const J=()=>{K({id:y.value})},E=e=>{e.type===v&&g()},L=e=>{e.type===v&&g()};return ct(()=>{f.on("item_tags_updated",L),f.on("items_tags_updated",E),g()}),rt(()=>{f.off("item_tags_updated",L),f.off("items_tags_updated",E)}),(e,t)=>{var D,M,N;const T=ft,p=yt,w=$t,P=Nt,W=Et,X=Ft,Z=kt,i=vt("tooltip");return a(),s("div",Vt,[l(G)&&!n.value?(a(),s("article",Ht,t[2]||(t[2]=[ut('<div class="top-app-bar" data-v-15a7315f><div class="title" data-v-15a7315f><div class="skeleton-text skeleton-app-bar" data-v-15a7315f></div></div><div class="actions" data-v-15a7315f><div class="skeleton-image skeleton-icon" data-v-15a7315f></div></div></div><div class="article-title" data-v-15a7315f><div class="skeleton-text skeleton-title" data-v-15a7315f></div></div><div class="md-container" data-v-15a7315f><div class="skeleton-text skeleton-content" style="width:100%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:90%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:75%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:85%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:60%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:80%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:70%;" data-v-15a7315f></div><div class="skeleton-text skeleton-content" style="width:65%;" data-v-15a7315f></div></div>',3)]))):n.value?(a(),s("article",Qt,[o("div",St,[o("div",At,[n.value.feed?(a(),s("a",{key:0,onClick:t[0]||(t[0]=u(O=>l(z)(n.value.feed),["stop","prevent"]))},q(n.value.feed.name),1)):C("",!0),n.value?d((a(),s("time",Gt,[pt(q(l(mt)(n.value.publishedAt)),1)])),[[i,l(_t)(n.value.publishedAt)]]):C("",!0),c(T,{tags:(D=n.value)==null?void 0:D.tags,type:v},null,8,["tags"]),d((a(),s("button",{class:"btn-icon sm",style:{"margin-inline-start":"16px"},onClick:u(j,["prevent"])},[t[3]||(t[3]=o("md-ripple",null,null,-1)),c(p)])),[[i,e.$t("add_to_tags")]]),l($)?(a(),s("md-circular-progress",zt)):d((a(),s("button",{key:3,class:"btn-icon sm",disabled:l($),onClick:u(J,["prevent"])},[t[4]||(t[4]=o("md-ripple",null,null,-1)),c(w)],8,Bt)),[[i,e.$t("sync_content")]]),d((a(),s("a",{href:(M=n.value)==null?void 0:M.url,class:"btn-icon",target:"_blank"},[o("button",It,[t[5]||(t[5]=o("md-ripple",null,null,-1)),c(P)])],8,Rt)),[[i,e.$t("view_original_article")]]),d((a(),s("button",{class:"btn-icon sm",onClick:t[1]||(t[1]=u(O=>l(R)({query:`ids:${y.value}`}),["prevent"]))},[t[6]||(t[6]=o("md-ripple",null,null,-1)),c(W)])),[[i,e.$t("save_to_notes")]]),d((a(),s("button",{class:"btn-icon sm",onClick:u(U,["prevent"])},[t[7]||(t[7]=o("md-ripple",null,null,-1)),c(X)])),[[i,e.$t("print")]])]),o("div",Ut,[d((a(),s("button",{class:"btn-icon",onClick:u(B,["prevent"])},[t[8]||(t[8]=o("md-ripple",null,null,-1)),c(Z)])),[[i,e.$t("close")]])])]),o("div",jt,q((N=n.value)==null?void 0:N.title),1),o("div",{class:"md-container",innerHTML:_.value},null,8,Kt)])):C("",!0)])}}}),Ot=qt(Yt,[["__scopeId","data-v-15a7315f"]]);export{Ot as default};
