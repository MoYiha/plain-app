import{_ as L}from"./LeftSidebar.vuevuetypescriptsetuptruelang-Cvb_6RH0.js";import{_ as M}from"./TagFilter.vuevuetypescriptsetuptruelang-BGZnlQo3.js";import{e as Q,f as I,s as N,g as R,G as V,r as m,J as z,w as A,O as x,o as u,a3 as g,a4 as y,a1 as G,a5 as P,a as t,k as j,c as _,y as h,P as S,j as k,t as a,l as C,R as D,Q as E,Y as F,A as J,z as B,B as O}from"./index-H9YOjX-Y.js";import{u as Y}from"./search-DOkNcsc9.js";import"./more-vert-C3_V8AEJ.js";const H={class:"nav"},K={class:"title"},U={key:0,class:"count"},W=["onClick"],X={class:"title"},Z={key:0,class:"count"},le=Q({__name:"MessagesSidebar",setup(ee){const d=I(),{counter:p}=N(R()),{parseQ:$}=Y(),o=V({tagIds:[]}),n=m(""),c=m(""),l=m(new Map),{fetch:b}=z({handle:e=>{e&&(p.value.messages=e.total,l.value.set("1",e.inbox),l.value.set("2",e.sent),l.value.set("3",e.drafts))},document:P,variables:()=>({})});function v(e){return l.value.get(e)??-1}function f(){var i;const e=y.currentRoute.value,r=G(((i=e.query.q)==null?void 0:i.toString())??"");$(o,r),n.value=o.type??"",c.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(c.value=""),b()}f(),A(()=>y.currentRoute.value,()=>{f()});function w(e){const r=J([{name:"type",op:"",value:e}]);B(d,`/messages?q=${O(r)}`)}function T(){B(d,"/messages")}return(e,r)=>{const i=M,q=L;return u(),x(q,null,{title:g(()=>[F(a(e.$t("page_title.messages")),1)]),body:g(()=>[t("ul",H,[t("li",{class:S({active:!c.value&&!n.value}),onClick:h(T,["prevent"])},[t("span",K,a(e.$t("all")),1),C(p).messages>=0?(u(),_("span",U,a(C(p).messages.toLocaleString()),1)):k("",!0)],2),(u(),_(E,null,D(["1","2","3"],s=>t("li",{key:s,class:S({active:s===n.value}),onClick:h(se=>w(s),["prevent"])},[t("span",X,a(e.$t(`message_type.${s}`)),1),v(s)>=0?(u(),_("span",Z,a(v(s).toLocaleString()),1)):k("",!0)],10,W)),64))]),j(i,{type:"SMS",selected:c.value},null,8,["selected"])]),_:1})}}});export{le as default};
