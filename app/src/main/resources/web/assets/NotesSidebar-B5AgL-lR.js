import{_ as B}from"./LeftSidebar.vuevuetypescriptsetuptruelang-CXG2XcH7.js";import{_ as $}from"./TagFilter.vuevuetypescriptsetuptruelang-DpSlIABO.js";import{d as I,u as V,s as A,i as L,I as Q,h as f,K as M,k as R,af as z,a1 as h,ag as E,v as x,q as v,bm as D,a6 as g,a0 as G,o as i,V as H,t as s,a,w as y,N as S,m as l,c as T,e as k,p as K,a7 as O,f as C,a8 as P}from"./index-W0C8ZaaK.js";import{u as U}from"./search-C3Yz-bhE.js";import"./more-vert-CNai-21a.js";import"./EditValueModal-BJTvyhUn.js";import"./vee-validate.esm-B6WUEvjJ.js";const j={class:"nav"},F={class:"title"},J={key:0,class:"count"},W={class:"title"},X={key:0,class:"count"},re=I({__name:"NotesSidebar",setup(Y){const u=V(),{counter:t}=A(L()),{parseQ:N}=U(),o=Q({tagIds:[]}),n=f(!1),r=f(""),{fetch:d}=M({handle:e=>{e&&(t.value.notes=e.total,t.value.notesTrash=e.trash)},document:D,variables:()=>({}),appApi:!0});function p(){var c;const e=g.currentRoute.value,m=G(((c=e.query.q)==null?void 0:c.toString())??"");N(o,m),r.value=o.tagIds.length===1?o.tagIds[0]:"",n.value=o.trash??!1,n.value&&(r.value=""),d()}p(),R(()=>g.currentRoute.value,()=>{p()});function b(){const e=O([{name:"trash",op:"",value:"true"}]);C(u,`/notes?q=${P(e)}`)}function q(){C(u,"/notes")}const _=()=>{d()};return z(()=>{h.on("notes_actioned",_)}),E(()=>{h.off("notes_actioned",_)}),(e,m)=>{const c=$,w=B;return i(),x(w,null,{title:v(()=>[H(s(e.$t("page_title.notes")),1)]),body:v(()=>[a("ul",j,[a("li",{onClick:y(q,["prevent"]),class:S({active:!r.value&&!n.value})},[a("span",F,s(e.$t("all")),1),l(t).notes>=0?(i(),T("span",J,s(l(t).notes.toLocaleString()),1)):k("",!0)],2),a("li",{onClick:y(b,["prevent"]),class:S({active:n.value})},[a("span",W,s(e.$t("trash")),1),l(t).notesTrash>=0?(i(),T("span",X,s(l(t).notesTrash.toLocaleString()),1)):k("",!0)],2)]),K(c,{type:"NOTE",selected:r.value},null,8,["selected"])]),_:1})}}});export{re as default};
