import{_ as A}from"./more-vert-DqCIvKEs.js";import{m as F,c as u,o as s,a as n,e as P,u as R,f as O,r as p,h as U,ba as j,D as x,ac as J,a2 as d,ad as K,k as v,N as W,t as l,p as C,M as X,O as M,aM as Y,y as g,a3 as q,Q as w,R as Z,P as ee,$ as f,aa as te,A as ne,z as ae,c1 as oe,B as se,i as B,c2 as ie,c3 as le,c4 as ce}from"./index-BEu6YjWH.js";import{E as Q}from"./EditValueModal-DSwcFZGr.js";const re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function de(m,o){return s(),u("svg",re,o[0]||(o[0]=[n("path",{fill:"currentColor",d:"M11 13H6q-.425 0-.712-.288T5 12t.288-.712T6 11h5V6q0-.425.288-.712T12 5t.713.288T13 6v5h5q.425 0 .713.288T19 12t-.288.713T18 13h-5v5q0 .425-.288.713T12 19t-.712-.288T11 18z"},null,-1)]))}const ue=F({name:"material-symbols-add-rounded",render:de}),me={class:"top-app-bar"},_e={class:"btn-icon no-click"},pe={class:"title"},ve={class:"actions"},ge={class:"nav"},fe=["onClick"],he={class:"title"},ye={class:"count"},Te=["anchor","open"],ke={slot:"headline"},$e={slot:"headline"},qe=P({__name:"TagFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(m){const o=m,{t:i}=R(),V=O(),h=p([]),_=p(!1),c=p(),{refetch:r}=U({handle:(e,t)=>{t?x(i(t),"error"):e&&(h.value=e.tags)},document:j,variables:{type:o.type}});function L(e){c.value=e,_.value=!0}function S(e){f(Q,{title:i("rename"),placeholder:i("name"),value:e.name,mutation:()=>B({document:ie}),getVariables:t=>({id:e.id,name:t}),done:()=>{r()}})}function D(e){f(te,{id:e.id,name:e.name,gql:le,typeName:"Tag"})}function G(){f(Q,{title:i("add_tag"),placeholder:i("name"),mutation:()=>B({document:ce,options:{update:()=>{r()}}}),getVariables:e=>({type:o.type,name:e})})}function N(e){const t=ne([{name:"tag_id",op:"",value:e.id}]);ae(V,`/${oe[o.type]}?q=${se(t)}`)}const y=e=>{e===o.type&&r()},T=e=>{e.type===o.type&&r()};return J(()=>{d.on("refetch_tags",y),d.on("media_items_actioned",T)}),K(()=>{d.off("refetch_tags",y),d.off("media_items_actioned",T)}),(e,t)=>{var b;const z=W,E=ue,k=Y,H=A,$=X("tooltip");return s(),u(w,null,[n("div",me,[n("div",_e,[v(z)]),n("div",pe,l(e.$t("tags")),1),n("div",ve,[C((s(),M(k,{onClick:g(G,["prevent"])},{icon:q(()=>[v(E)]),_:1})),[[$,e.$t("add_tag")]])])]),n("ul",ge,[(s(!0),u(w,null,Z(h.value,a=>(s(),u("li",{key:a.id,class:ee({active:a.id===m.selected}),onClick:g(I=>N(a),["prevent"])},[n("span",he,l(a.name),1),C((s(),M(k,{id:"tag-"+a.id,class:"sm",onClick:g(I=>L(a),["prevent","stop"])},{icon:q(()=>[v(H)]),_:2},1032,["id","onClick"])),[[$,e.$t("actions")]]),n("span",ye,l(a.count.toLocaleString()),1)],10,fe))),128))]),n("md-menu",{positioning:"popover",anchor:"tag-"+((b=c.value)==null?void 0:b.id),"stay-open-on-focusout":"",quick:"",open:_.value,onClosed:t[2]||(t[2]=a=>_.value=!1)},[n("md-menu-item",{onClick:t[0]||(t[0]=a=>S(c.value))},[n("div",ke,l(e.$t("rename")),1)]),n("md-menu-item",{onClick:t[1]||(t[1]=a=>D(c.value))},[n("div",$e,l(e.$t("delete")),1)])],40,Te)],64)}}});export{qe as _,ue as a};
