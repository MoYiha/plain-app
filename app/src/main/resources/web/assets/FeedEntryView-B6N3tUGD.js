import{m as te,c as o,o as n,a as c,e as se,u as ne,r as p,K as oe,s as ae,g as ie,L as de,f as le,i as V,E as w,h as ce,M as re,N as _e,j as C,l as i,d as ve,P as d,k as l,S as ue,y as _,t as q,Q as me,a0 as pe,F as fe,a1 as ye,$ as ke,R as ge,cx as be,cy as he,cn as Te,bj as we,cz as Ce,Z as qe,A as H,a2 as $e,a3 as xe,a5 as f,H as Ee}from"./index-CuU5w3Fk.js";import{_ as Fe}from"./print-outline-rounded-rFOQwzQu.js";import{a as Le,_ as De}from"./add-notes-outline-rounded-DF30hd1s.js";import{u as Me}from"./markdown-GsmR3cqR.js";import{u as Ne}from"./feeds-lyrVZxPU.js";const Ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function He(Q,r){return n(),o("svg",Ve,r[0]||(r[0]=[c("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1)]))}const Qe=te({name:"material-symbols-open-in-new-rounded",render:He}),Se={class:"content"},ze={key:0},Ae={key:1},Be={class:"top-app-bar"},Re={class:"title"},Ge={key:1},je=["disabled"],Ie=["href"],Ke={class:"btn-icon sm"},Pe={class:"actions"},Ue={class:"article-title"},Ye=["innerHTML"],v="FEED_ENTRY",Ze=se({__name:"FeedEntryView",setup(Q){const{t:r}=ne(),$=oe(),y=p($.params.id),s=p(),u=p(""),k=p(),{app:S,urlTokenKey:z}=ae(ie()),{render:x}=Me(S,z),{loading:A,fetch:g}=de({handle:async(e,t)=>{t?w(r(t),"error"):(s.value=e.feedEntry,s.value?u.value=await x(e.feedEntry.content||e.feedEntry.description):u.value="")},document:he,variables:()=>({id:y.value})}),b=le(),{viewFeed:B}=Ne(b);function R(){const e=$.query.q;e?H(b,`/feeds?q=${e}`):H(b,"/feeds")}const{mutate:G,loading:Je,onDone:j}=V({document:Te});j(()=>{w(r("saved"))}),ce({handle:(e,t)=>{t?w(r(t),"error"):e&&(k.value=e.tags)},document:we,variables:{type:v}});const I=()=>{window.print()};function K(){var e,t;$e(xe,{type:v,tags:k.value,item:{key:(e=s.value)==null?void 0:e.id,title:"",size:0},selected:(t=k.value)==null?void 0:t.filter(h=>{var m;return(m=s.value)==null?void 0:m.tags.some(T=>T.id===h.id)})})}const{mutate:P,loading:E,onDone:U}=V({document:Ce});U(async e=>{const t=e.data;s.value=t.syncFeedContent,u.value=await x(t.syncFeedContent.content||t.syncFeedContent.description)});const Y=()=>{P({id:y.value})},F=e=>{e.type===v&&g()},L=e=>{e.type===v&&g()};return re(()=>{f.on("item_tags_updated",L),f.on("items_tags_updated",F),g()}),_e(()=>{f.off("item_tags_updated",L),f.off("items_tags_updated",F)}),(e,t)=>{var D,M,N;const h=ke,m=ge,T=qe,Z=Le,J=Qe,O=De,W=Fe,X=be,a=me("tooltip");return n(),o("div",Se,[i(A)&&!s.value?(n(),o("article",ze,t[2]||(t[2]=[ve('<div class="top-app-bar" data-v-862035f5><div class="title" data-v-862035f5><div class="skeleton-text skeleton-app-bar" data-v-862035f5></div></div><div class="actions" data-v-862035f5><div class="skeleton-image skeleton-icon" data-v-862035f5></div></div></div><div class="article-title" data-v-862035f5><div class="skeleton-text skeleton-title" data-v-862035f5></div></div><div class="md-container" data-v-862035f5><div class="skeleton-text skeleton-content" style="width:100%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:90%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:75%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:85%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:60%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:80%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:70%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:65%;" data-v-862035f5></div></div>',3)]))):s.value?(n(),o("article",Ae,[c("div",Be,[c("div",Re,[s.value.feed?(n(),o("a",{key:0,onClick:t[0]||(t[0]=_(ee=>i(B)(s.value.feed),["stop","prevent"]))},q(s.value.feed.name),1)):C("",!0),s.value?d((n(),o("time",Ge,[fe(q(i(ye)(s.value.publishedAt)),1)])),[[a,i(pe)(s.value.publishedAt)]]):C("",!0),l(h,{tags:(D=s.value)==null?void 0:D.tags,type:v},null,8,["tags"]),d((n(),o("button",{class:"btn-icon sm",style:{"margin-inline-start":"16px"},onClick:_(K,["prevent"])},[l(m)])),[[a,e.$t("add_to_tags")]]),i(E)?(n(),ue(T,{key:2,indeterminate:"",class:"sm"})):d((n(),o("button",{key:3,class:"btn-icon sm",disabled:i(E),onClick:_(Y,["prevent"])},[l(Z)],8,je)),[[a,e.$t("sync_content")]]),d((n(),o("a",{href:(M=s.value)==null?void 0:M.url,class:"btn-icon",target:"_blank"},[c("button",Ke,[l(J)])],8,Ie)),[[a,e.$t("view_original_article")]]),d((n(),o("button",{class:"btn-icon sm",onClick:t[1]||(t[1]=_(ee=>i(G)({query:`ids:${y.value}`}),["prevent"]))},[l(O)])),[[a,e.$t("save_to_notes")]]),d((n(),o("button",{class:"btn-icon sm",onClick:_(I,["prevent"])},[l(W)])),[[a,e.$t("print")]])]),c("div",Pe,[d((n(),o("button",{class:"btn-icon",onClick:_(R,["prevent"])},[l(X)])),[[a,e.$t("close")]])])]),c("div",Ue,q((N=s.value)==null?void 0:N.title),1),c("div",{class:"md-container",innerHTML:u.value},null,8,Ye)])):C("",!0)])}}}),st=Ee(Ze,[["__scopeId","data-v-862035f5"]]);export{st as default};
