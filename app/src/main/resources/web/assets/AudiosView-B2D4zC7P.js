import{_ as ss}from"./VPagination.vuevuetypescriptsetuptruelang-CHD_8v0v.js";import{_ as os,u as is,a as as}from"./key-events-cECSsEaK.js";import{e as Y,c,J as p,o as a,a as r,d as ns,t as h,m as We,u as pe,T as Z,Q as v,j as B,U as R,R as me,l as t,ai as Xe,z as m,q as u,k as l,a8 as Je,aO as Ze,aP as Ve,al as Ye,aQ as ne,aR as le,aS as xe,b7 as ls,S as et,Z as ds,b3 as Re,aK as Ue,n as ze,aa as Ne,$ as rs,a0 as us,G as Qe,a1 as Oe,i as de,b8 as ps,b9 as ms,s as re,g as tt,a5 as F,aU as st,F as ue,r as V,ba as ys,f as cs,K as gs,an as He,ao as vs,L as fs,M as hs,aT as ks,aV as _s,ap as Is,N as bs,aW as $s,aX as Ts,O as ws,P as Fs,p as Ps,ah as Cs,ar as As,V as ae,W as Ss,ay as Ls,bb as Es,aj as Ds,aq as Ms,ax as qs,a$ as Bs,B as Ke,bc as je,a2 as Vs,a3 as Rs,b1 as Ge,a4 as Us,I as zs}from"./index-DRp6xo3j.js";import{_ as Ns}from"./ListItemPhone.vuevuetypescriptsetuptruelang-CQmW3Kot.js";import{_ as Qs}from"./FieldId.vuevuetypescriptsetuptruelang-slfJ4h1L.js";import{_ as ot}from"./VCheckbox-COaKMA3E.js";import{_ as Os,a as Hs,b as Ks}from"./SearchInput-BJwFSU_P.js";import{_ as js}from"./sort-rounded-CWaGCvOj.js";import{_ as Gs}from"./MediaKeyboardShortcuts.vuevuetypescriptsetuptruelang-CQl8yN-o.js";import{u as Ws}from"./search-VN1T4MU3.js";import{a as Xs}from"./tags-DBIbojtk.js";import"./search-rounded-DveNm3Pb.js";const Js={key:0,class:"media-item selectable-card-skeleton"},Zs={class:"list-item-start"},Ys={class:"number"},xs=Y({__name:"AudioSkeletonItem",props:{index:{},isPhone:{type:Boolean}},setup(C){return(e,s)=>{const n=os;return e.isPhone?(a(),p(n,{key:1,"title-width":"70%",subtitles:[{width:"45%"},{width:"40%"},{width:"50%"}],"action-count":4})):(a(),c("section",Js,[r("div",Zs,[s[0]||(s[0]=r("div",{class:"skeleton-checkbox"},null,-1)),r("span",Ys,h(e.index),1)]),s[1]||(s[1]=ns('<div class="image"><div class="skeleton-image lg"></div></div><div class="title"><div class="skeleton-text lg" style="width:40%;"></div></div><div class="subtitle"><div class="skeleton-text" style="width:30%;"></div></div><div class="list-item-actions"><div class="skeleton-text lg" style="width:140px;"></div></div><div class="artist"><div class="skeleton-text" style="width:60px;"></div></div><div class="time"><div class="skeleton-text" style="width:60px;"></div></div>',6))]))}}}),eo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function to(C,e){return a(),c("svg",eo,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M10 16q.425 0 .713-.288T11 15V9q0-.425-.288-.712T10 8t-.712.288T9 9v6q0 .425.288.713T10 16m4 0q.425 0 .713-.288T15 15V9q0-.425-.288-.712T14 8t-.712.288T13 9v6q0 .425.288.713T14 16m-2 6q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1)]))}const so=We({name:"material-symbols-pause-circle-outline-rounded",render:to}),oo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function io(C,e){return a(),c("svg",oo,e[0]||(e[0]=[r("path",{fill:"currentColor",d:"M3 16v-2h7v2zm0-4v-2h11v2zm0-4V6h11v2zm13 12v-4h-4v-2h4v-4h2v4h4v2h-4v4z"},null,-1)]))}const it=We({name:"material-symbols-playlist-add",render:io}),ao=Y({__name:"AudioActionButtons",props:{item:{},filter:{},dataType:{},animatingIds:{},playLoading:{type:Boolean},playPath:{},app:{},isPhone:{type:Boolean},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(C){const{t:e}=pe();return(s,n)=>{const _=Je,f=Xe,U=Ze,z=Ye,I=xe,$=ls,y=it,N=et,w=ds,T=so,g=me("tooltip");return a(),c("div",{class:Z(["list-item-actions",{mobile:s.isPhone}])},[s.filter.trash?(a(),c(R,{key:0},[v((a(),p(f,{class:"sm",onClick:n[0]||(n[0]=m(k=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:u(()=>[l(_)]),_:1})),[[g,t(e)("delete")]]),v((a(),p(f,{class:"sm",loading:s.restoreLoading(`ids:${s.item.id}`),onClick:n[1]||(n[1]=m(k=>s.restore(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:u(()=>[l(U)]),_:1},8,["loading"])),[[g,t(e)("restore")]]),v((a(),p(f,{class:"sm",onClick:n[2]||(n[2]=m(k=>s.downloadFile(s.item.path,t(Ve)(s.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[l(z)]),_:1})),[[g,t(e)("download")]])],64)):(a(),c(R,{key:1},[t(ne)(t(le).MEDIA_TRASH,s.app.osVersion)?v((a(),p(f,{key:0,class:"sm",loading:s.trashLoading(`ids:${s.item.id}`),onClick:n[3]||(n[3]=m(k=>s.trash(s.dataType,`ids:${s.item.id}`),["stop"]))},{default:u(()=>[l(I)]),_:1},8,["loading"])),[[g,t(e)("move_to_trash")]]):v((a(),p(f,{key:1,class:"sm",onClick:n[4]||(n[4]=m(k=>s.deleteItem(s.dataType,s.item),["stop"]))},{default:u(()=>[l(_)]),_:1})),[[g,t(e)("delete")]]),v((a(),p(f,{class:"sm",onClick:n[5]||(n[5]=m(k=>s.downloadFile(s.item.path,t(Ve)(s.item.path).replace(" ","-")),["stop"]))},{default:u(()=>[l(z)]),_:1})),[[g,t(e)("download")]]),s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?v((a(),p(f,{key:2,class:"sm",onClick:n[6]||(n[6]=m(k=>s.handleRemoveFromPlaylist(k,s.item),["stop","prevent"]))},{default:u(()=>[l($,{class:"playlist-remove-icon"})]),_:1})),[[g,t(e)("remove_from_playlist")]]):s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(a(),p(f,{key:3,class:"sm",disabled:!0},{default:u(()=>[l($,{class:"playlist-remove-icon rotating"})]),_:1})):!s.isInPlaylist(s.item)&&!s.animatingIds.includes(s.item.id)?v((a(),p(f,{key:4,class:"sm",onClick:n[7]||(n[7]=m(k=>s.addToPlaylist(k,s.item),["stop","prevent"]))},{default:u(()=>[l(y,{class:"playlist-add-icon"})]),_:1})),[[g,t(e)("add_to_playlist")]]):!s.isInPlaylist(s.item)&&s.animatingIds.includes(s.item.id)?(a(),p(f,{key:5,class:"sm",disabled:!0},{default:u(()=>[l(y,{class:"playlist-add-icon rotating"})]),_:1})):B("",!0),v((a(),p(f,{class:"sm",onClick:n[8]||(n[8]=m(k=>s.addItemToTags(s.item),["stop"]))},{default:u(()=>[l(N)]),_:1})),[[g,t(e)("add_to_tags")]])],64)),s.playLoading&&s.item.path===s.playPath?(a(),p(w,{key:2,indeterminate:"",class:"sm"})):s.isAudioPlaying(s.item)?v((a(),p(f,{key:3,class:"sm",onClick:n[9]||(n[9]=m(k=>s.pause(),["stop"]))},{default:u(()=>[l(T)]),_:1})),[[g,t(e)("pause")]]):B("",!0)],2)}}}),no={class:"list-item-start"},lo={class:"number"},ro={class:"image"},uo=["src"],po=["src"],mo={class:"title"},yo={class:"subtitle"},co={class:"duration"},go={class:"artist"},vo={class:"time"},fo={class:"image"},ho=["src"],ko=["src"],_o={class:"subtitle"},Io={class:"duration"},bo={key:0,class:"subtitle"},$o={class:"subtitle"},To={key:0,class:"artist"},wo={class:"time"},Fo=Y({__name:"AudioListItem",props:{item:{},index:{},selectedIds:{},shiftEffectingIds:{},shouldSelect:{type:Boolean},isPhone:{type:Boolean},imageErrorIds:{},bucketsMap:{},filter:{},dataType:{},animatingIds:{},playLoading:{type:Boolean},playPath:{},mainStore:{},app:{},handleItemClick:{type:Function},handleMouseOver:{type:Function},toggleSelect:{type:Function},onImageError:{type:Function},viewBucket:{type:Function},deleteItem:{type:Function},restore:{type:Function},downloadFile:{type:Function},trash:{type:Function},handleRemoveFromPlaylist:{type:Function},addToPlaylist:{type:Function},addItemToTags:{type:Function},play:{type:Function},pause:{type:Function},isAudioPlaying:{type:Function},isInPlaylist:{type:Function},restoreLoading:{type:Function},trashLoading:{type:Function}},setup(C){return(e,s)=>{var $;const n=ot,_=Qs,f=rs,U=ao,z=Ns,I=me("tooltip");return e.isPhone?(a(),p(z,{key:1,"is-selected":e.selectedIds.includes(e.item.id),"is-selecting":e.shiftEffectingIds.includes(e.item.id),"checkbox-checked":e.shiftEffectingIds.includes(e.item.id)?e.shouldSelect:e.selectedIds.includes(e.item.id),onClick:s[8]||(s[8]=y=>e.handleItemClick(y,e.item,e.index,()=>e.play(e.item))),onMouseover:s[9]||(s[9]=y=>e.handleMouseOver(y,e.index)),onCheckboxClick:s[10]||(s[10]=y=>e.toggleSelect(y,e.item,e.index))},{image:u(()=>[r("div",fo,[e.imageErrorIds.includes(e.item.id)?(a(),c("img",{key:0,src:`/ficons/${t(Re)(e.item.path)}.svg`,class:"svg"},null,8,ho)):(a(),c("img",{key:1,class:"image-thumb",src:t(Ue)(e.item.albumFileId,"&w=200&h=200"),onError:s[6]||(s[6]=y=>e.onImageError(e.item.id))},null,40,ko))])]),title:u(()=>[Qe(h(e.item.title),1)]),subtitle:u(()=>{var y;return[r("div",_o,[r("span",null,h(t(ze)(e.item.size)),1),r("span",Io,h(t(Ne)(e.item.duration)),1)]),e.bucketsMap[e.item.bucketId]||e.item.tags.length>0?(a(),c("div",bo,[r("a",{onClick:s[7]||(s[7]=m(N=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},h((y=e.bucketsMap[e.item.bucketId])==null?void 0:y.name),1),l(f,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])])):B("",!0),r("div",$o,[e.item.artist?(a(),c("span",To,h(e.item.artist),1)):B("",!0),r("span",wo,h(t(Oe)(e.item.createdAt)),1)])]}),actions:u(()=>[l(U,{item:e.item,filter:e.filter,"data-type":e.dataType,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"is-phone":!0,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"])]),_:1},8,["is-selected","is-selecting","checkbox-checked"])):(a(),c("section",{key:0,class:Z(["media-item selectable-card",{selected:e.selectedIds.includes(e.item.id),selecting:e.shiftEffectingIds.includes(e.item.id)}]),onClick:s[4]||(s[4]=m(y=>e.handleItemClick(y,e.item,e.index,()=>e.play(e.item)),["stop"])),onMouseover:s[5]||(s[5]=y=>e.handleMouseOver(y,e.index))},[r("div",no,[e.shiftEffectingIds.includes(e.item.id)?(a(),p(n,{key:0,class:"checkbox","touch-target":"wrapper",checked:e.shouldSelect,onClick:s[0]||(s[0]=m(y=>e.toggleSelect(y,e.item,e.index),["stop"]))},null,8,["checked"])):(a(),p(n,{key:1,class:"checkbox","touch-target":"wrapper",checked:e.selectedIds.includes(e.item.id),onClick:s[1]||(s[1]=m(y=>e.toggleSelect(y,e.item,e.index),["stop"]))},null,8,["checked"])),r("span",lo,[l(_,{id:e.index+1,raw:e.item},null,8,["id","raw"])])]),r("div",ro,[e.imageErrorIds.includes(e.item.id)?(a(),c("img",{key:0,src:`/ficons/${t(Re)(e.item.path)}.svg`,class:"svg"},null,8,uo)):(a(),c("img",{key:1,class:"image-thumb",src:t(Ue)(e.item.albumFileId,"&w=200&h=200"),onError:s[2]||(s[2]=y=>e.onImageError(e.item.id))},null,40,po))]),r("div",mo,h(e.item.title),1),r("div",yo,[r("span",null,h(t(ze)(e.item.size)),1),r("span",co,h(t(Ne)(e.item.duration)),1),r("a",{onClick:s[3]||(s[3]=m(y=>e.viewBucket(e.mainStore,e.item.bucketId),["stop","prevent"]))},h(($=e.bucketsMap[e.item.bucketId])==null?void 0:$.name),1),l(f,{tags:e.item.tags,type:e.dataType,"only-links":!0},null,8,["tags","type"])]),l(U,{item:e.item,filter:e.filter,"data-type":e.dataType,"animating-ids":e.animatingIds,"play-loading":e.playLoading,"play-path":e.playPath,app:e.app,"delete-item":e.deleteItem,restore:e.restore,"download-file":e.downloadFile,trash:e.trash,"handle-remove-from-playlist":e.handleRemoveFromPlaylist,"add-to-playlist":e.addToPlaylist,"add-item-to-tags":e.addItemToTags,pause:e.pause,"is-audio-playing":e.isAudioPlaying,"is-in-playlist":e.isInPlaylist,"restore-loading":e.restoreLoading,"trash-loading":e.trashLoading},null,8,["item","filter","data-type","animating-ids","play-loading","play-path","app","delete-item","restore","download-file","trash","handle-remove-from-playlist","add-to-playlist","add-item-to-tags","pause","is-audio-playing","is-in-playlist","restore-loading","trash-loading"]),r("div",go,h(e.item.artist),1),r("div",vo,[v((a(),c("span",null,[Qe(h(t(Oe)(e.item.createdAt)),1)])),[[I,t(us)(e.item.createdAt)]])])],34))}}}),Po=(C,e)=>{const{mutate:s,loading:n,onDone:_}=de({document:ps}),{mutate:f,loading:U,onDone:z}=de({document:ms}),{app:I}=re(tt()),{t:$}=pe();_(()=>{F.emit("refetch_app"),e()}),z(()=>{F.emit("refetch_app")});const y=st(()=>{var w;return((w=I.value)==null?void 0:w.audios)??[]}),N=w=>y.value.some(T=>T.path===w.path);return{loading:n,removeLoading:U,isInPlaylist:N,addItemsToPlaylist:(w,T,g,k)=>{let A=k;if(!g){if(T.length===0){ue($("select_first"),"error");return}A=`ids:${T.join(",")}`}s({query:A})},removeItemsFromPlaylist:(w,T,g,k)=>{if(g)C.value.filter(A=>N(A)).forEach(A=>{f({path:A.path})});else{if(T.length===0){ue($("select_first"),"error");return}C.value.filter(Q=>T.includes(Q.id)&&N(Q)).forEach(Q=>{f({path:Q.path})})}},addToPlaylist:(w,T)=>{s({query:`ids:${T.id}`})},removeFromPlaylist:(w,T)=>{f({path:T.path})}}},Co=()=>{const C=V(""),{mutate:e,loading:s,onDone:n}=de({document:ys});return n(()=>{F.emit("play_audio")}),{loading:s,playPath:C,play:_=>{C.value=_.path,e({path:_.path})},pause:()=>{F.emit("pause_audio")}}},Ao={class:"top-app-bar"},So={class:"title"},Lo={key:0},Eo={key:1},Do={key:0,class:"actions"},Mo=["onClick"],qo={key:0,class:"no-data-placeholder"},H=50,Bo=Y({__name:"AudiosView",setup(C){var De;const e=Ps("isPhone"),s=cs(),{audioSortBy:n}=re(s),_=V([]),{t:f}=pe(),{parseQ:U,buildQ:z}=Ws(),I=gs({tagIds:[],bucketId:void 0}),{app:$,urlTokenKey:y,audioPlaying:N,uploads:w}=re(tt()),T=o=>{var i;return N.value&&((i=$.value)==null?void 0:i.audioCurrent)===o.path},g=V([]),k=V(!1),A=V(!1),{input:Q,upload:at,uploadChanged:ye}=He(w),{input:nt,upload:lt,uploadChanged:ce}=He(w),{dropping:dt,fileDragEnter:ge,fileDragLeave:ve,dropFiles:rt}=vs(w),x=V(!1),b=fs.AUDIO,fe=hs(),he=fe.query,ee=V(parseInt(((De=he.page)==null?void 0:De.toString())??"1")),{tags:K,buckets:j,fetch:ut}=ks(b),pt=st(()=>{const o={};return j.value.forEach(i=>{o[i.id]=i}),o}),S=V(""),{addToTags:mt}=Xs(b,K),{deleteItems:te,deleteItem:yt}=_s(),{view:ct}=Bs(b),{selectedIds:L,allChecked:ke,realAllChecked:E,selectRealAll:gt,allCheckedAlertVisible:vt,clearSelection:O,toggleAllChecked:ft,toggleSelect:ht,total:D,checked:X,shiftEffectingIds:kt,handleItemClick:_t,handleMouseOver:It,selectAll:bt,shouldSelect:$t}=is(_),{downloadItems:_e}=Is(y,b,O,()=>Ls("audios")),{downloadFile:Tt}=qs(y),Ie=o=>{const i=fe.query.q;Ke(s,i?`/audios?page=${o}&q=${i}`:`/audios?page=${o}`)},{keyDown:be,keyUp:$e}=as(D,H,ee,bt,O,Ie,()=>{ne(le.MEDIA_TRASH,$.value.osVersion)?oe(b,W()):te(b,L.value,E.value,D.value,S.value)}),{addItemsToPlaylist:wt,addToPlaylist:Ft,removeFromPlaylist:Pt,isInPlaylist:Ct}=Po(_,O),At=Ms(),Te=V([]),{play:St,playPath:Lt,loading:Et,pause:Dt}=Co(),Mt=o=>{Te.value.push(o)},{loading:se,fetch:G}=bs({handle:(o,i)=>{x.value=!1,i?ue(f(i),"error"):o&&(_.value=o.items,D.value=o.total)},document:Es,variables:()=>({offset:(ee.value-1)*H,limit:H,query:S.value,sortBy:n.value})}),{trashLoading:we,trash:oe}=$s(),{restoreLoading:Fe,restore:Pe}=Ts();function Ce(o){return o?`/audios?q=${o}`:"/audios"}function qt(o){n.value!==o&&(x.value=!0,n.value=o)}function ie(){const o=j.value.find(i=>i.id===I.bucketId);return o?Ge(o.topItems[0]):`${$.value.internalStoragePath}/Music`}function Bt(){at(ie())}function Vt(){lt(ie())}function Rt(o){rt(o,ie(),i=>je(i.name))}const W=()=>{let o=S.value;return E.value||(o=`ids:${L.value.join(",")}`),o},Ae=o=>{o.type===b&&(O(),G())},Se=o=>{o.type===b&&G()},Le=o=>{o.type===b&&(O(),G())},Ee=o=>{o.status==="done"&&je(o.fileName)&&((!I.bucketId||j.value.some(P=>P.id===I.bucketId&&P.topItems.some(J=>o.dir.startsWith(Ge(J)))))&&setTimeout(()=>{G()},1e3),F.emit("media_items_actioned",{type:b,action:"upload",query:""}))};function Ut(o){const i=o.tags.map(P=>P.id);Vs(Rs,{type:b,tags:K.value,item:{key:o.id,title:o.title,size:o.size},selected:K.value.filter(P=>i.includes(P.id))})}function zt(o,i){g.value.push(i.id),setTimeout(()=>{Pt(o,i),setTimeout(()=>{g.value=g.value.filter(P=>P!==i.id)},200)},150)}function Nt(o,i){g.value.push(i.id),setTimeout(()=>{Ft(o,i),setTimeout(()=>{g.value=g.value.filter(P=>P!==i.id)},200)},150)}function Qt(o){Object.assign(I,o),Ke(s,Ce(z(I)))}return ws(()=>{var o;S.value=Us(((o=he.q)==null?void 0:o.toString())??""),U(I,S.value),ut(),G(),F.on("item_tags_updated",Se),F.on("items_tags_updated",Ae),F.on("media_items_actioned",Le),F.on("upload_task_done",Ee),window.addEventListener("keydown",be),window.addEventListener("keyup",$e)}),Fs(()=>{F.off("item_tags_updated",Se),F.off("items_tags_updated",Ae),F.off("media_items_actioned",Le),F.off("upload_task_done",Ee),window.removeEventListener("keydown",be),window.removeEventListener("keyup",$e)}),(o,i)=>{const P=ot,J=Je,M=Xe,Ot=Ze,Me=Ye,Ht=xe,Kt=it,jt=et,Gt=Os,Wt=Gs,Xt=Ds,qe=Cs,Jt=js,Zt=Ks,Yt=Hs,xt=Fo,es=xs,ts=ss,q=me("tooltip");return a(),c(R,null,[r("div",Ao,[l(P,{"touch-target":"wrapper",checked:t(ke),indeterminate:!t(ke)&&t(X),onChange:t(ft)},null,8,["checked","indeterminate","onChange"]),r("div",So,[t(L).length?(a(),c("span",Lo,h(o.$t("x_selected",{count:t(E)?t(D).toLocaleString():t(L).length.toLocaleString()})),1)):(a(),c("span",Eo,h(o.$t("page_title.audios"))+" ("+h(t(D).toLocaleString())+")",1)),t(X)?(a(),c(R,{key:2},[I.trash?(a(),c(R,{key:0},[v((a(),p(M,{onClick:i[0]||(i[0]=m(d=>t(te)(t(b),t(L),t(E),t(D),S.value),["stop"]))},{default:u(()=>[l(J)]),_:1})),[[q,o.$t("delete")]]),v((a(),p(M,{loading:t(Fe)(W()),onClick:i[1]||(i[1]=m(d=>t(Pe)(t(b),W()),["stop"]))},{default:u(()=>[l(Ot)]),_:1},8,["loading"])),[[q,o.$t("restore")]]),v((a(),p(M,{onClick:i[2]||(i[2]=m(d=>t(_e)(t(E),t(L),S.value),["stop"]))},{default:u(()=>[l(Me)]),_:1})),[[q,o.$t("download")]])],64)):(a(),c(R,{key:1},[t(ne)(t(le).MEDIA_TRASH,t($).osVersion)?v((a(),p(M,{key:0,loading:t(we)(W()),onClick:i[3]||(i[3]=m(d=>t(oe)(t(b),W()),["stop"]))},{default:u(()=>[l(Ht)]),_:1},8,["loading"])),[[q,o.$t("move_to_trash")]]):v((a(),p(M,{key:1,onClick:i[4]||(i[4]=m(d=>t(te)(t(b),t(L),t(E),t(D),S.value),["stop"]))},{default:u(()=>[l(J)]),_:1})),[[q,o.$t("delete")]]),v((a(),p(M,{onClick:i[5]||(i[5]=m(d=>t(_e)(t(E),t(L),S.value),["stop"]))},{default:u(()=>[l(Me)]),_:1})),[[q,o.$t("download")]]),v((a(),p(M,{onClick:i[6]||(i[6]=m(d=>t(wt)(d,t(L),t(E),S.value),["stop"]))},{default:u(()=>[l(Kt)]),_:1})),[[q,o.$t("add_to_playlist")]]),v((a(),p(M,{onClick:i[7]||(i[7]=m(d=>t(mt)(t(L),t(E),S.value),["stop"]))},{default:u(()=>[l(jt)]),_:1})),[[q,o.$t("add_to_tags")]])],64))],64)):B("",!0)]),!t(e)||!t(X)?(a(),c("div",Do,[l(Gt,{filter:I,tags:t(K),buckets:t(j),"get-url":Ce,"show-chips":!t(e),"is-phone":t(e)},null,8,["filter","tags","buckets","show-chips","is-phone"]),l(Wt),l(qe,{modelValue:k.value,"onUpdate:modelValue":i[10]||(i[10]=d=>k.value=d)},{trigger:u(()=>[v((a(),p(M,null,{default:u(()=>[l(Xt)]),_:1})),[[q,o.$t("upload")]])]),default:u(()=>[r("div",{class:"dropdown-item",onClick:i[8]||(i[8]=m(d=>{Bt(),k.value=!1},["stop"]))},h(o.$t("upload_files")),1),r("div",{class:"dropdown-item",onClick:i[9]||(i[9]=m(d=>{Vt(),k.value=!1},["stop"]))},h(o.$t("upload_folder")),1)]),_:1},8,["modelValue"]),l(qe,{modelValue:A.value,"onUpdate:modelValue":i[11]||(i[11]=d=>A.value=d)},{trigger:u(()=>[v((a(),p(M,{loading:x.value},{default:u(()=>[l(Jt)]),_:1},8,["loading"])),[[q,o.$t("sort")]])]),default:u(()=>[(a(!0),c(R,null,ae(t(At),d=>(a(),c("div",{key:d.value,class:Z(["dropdown-item",{selected:d.value===t(n)}]),onClick:Be=>{qt(d.value),A.value=!1}},h(o.$t(d.label)),11,Mo))),128))]),_:1},8,["modelValue"])])):B("",!0)]),t(e)?(a(),p(Zt,{key:0,class:"mobile-search-filters",filter:I,tags:t(K),feeds:[],buckets:t(j),types:[],onFilterChange:Qt},null,8,["filter","tags","buckets"])):B("",!0),l(Yt,{limit:H,total:t(D),"all-checked-alert-visible":t(vt),"real-all-checked":t(E),"select-real-all":t(gt),"clear-selection":t(O)},null,8,["total","all-checked-alert-visible","real-all-checked","select-real-all","clear-selection"]),r("div",{class:"scroll-content",onDragover:i[15]||(i[15]=m((...d)=>t(ge)&&t(ge)(...d),["stop","prevent"]))},[v(r("div",{class:"drag-mask",onDrop:m(Rt,["stop","prevent"]),onDragleave:i[12]||(i[12]=m((...d)=>t(ve)&&t(ve)(...d),["stop","prevent"]))},h(o.$t("release_to_send_files")),545),[[As,t(dt)]]),r("div",{class:Z(["audio-list",{"select-mode":t(X)}])},[(a(!0),c(R,null,ae(_.value,(d,Be)=>(a(),p(xt,{key:d.id,item:d,index:Be,"is-phone":t(e),"selected-ids":t(L),"shift-effecting-ids":t(kt),"should-select":t($t),"image-error-ids":Te.value,"buckets-map":pt.value,filter:I,"data-type":t(b),"animating-ids":g.value,"play-loading":t(Et),"play-path":t(Lt),"main-store":t(s),app:t($),"handle-item-click":t(_t),"handle-mouse-over":t(It),"toggle-select":t(ht),"on-image-error":Mt,"view-bucket":t(ct),"delete-item":t(yt),restore:t(Pe),"download-file":t(Tt),trash:t(oe),"handle-remove-from-playlist":zt,"add-to-playlist":Nt,"add-item-to-tags":Ut,play:t(St),pause:t(Dt),"is-audio-playing":T,"is-in-playlist":t(Ct),"restore-loading":t(Fe),"trash-loading":t(we)},null,8,["item","index","is-phone","selected-ids","shift-effecting-ids","should-select","image-error-ids","buckets-map","filter","data-type","animating-ids","play-loading","play-path","main-store","app","handle-item-click","handle-mouse-over","toggle-select","view-bucket","delete-item","restore","download-file","trash","play","pause","is-in-playlist","restore-loading","trash-loading"]))),128)),t(se)&&_.value.length===0?(a(),c(R,{key:0},ae(20,d=>l(es,{key:d,index:d,"is-phone":t(e)},null,8,["index","is-phone"])),64)):B("",!0)],2),!t(se)&&_.value.length===0?(a(),c("div",qo,h(o.$t(t(Ss)(t(se),t($).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):B("",!0),t(D)>H?(a(),p(ts,{key:1,page:ee.value,go:Ie,total:t(D),limit:H},null,8,["page","total"])):B("",!0),r("input",{ref_key:"fileInput",ref:Q,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",onChange:i[13]||(i[13]=(...d)=>t(ye)&&t(ye)(...d))},null,544),r("input",{ref_key:"dirFileInput",ref:nt,style:{display:"none"},type:"file",accept:"audio/*",multiple:"",webkitdirectory:"",mozdirectory:"",directory:"",onChange:i[14]||(i[14]=(...d)=>t(ce)&&t(ce)(...d))},null,544)],32)],64)}}}),Xo=zs(Bo,[["__scopeId","data-v-e15ff482"]]);export{Xo as default};
