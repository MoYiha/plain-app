import{e as b,c as h,o as p,a as k,j as P,c3 as K,U as S,V as N,I as w,r as d,aU as B,u as A,F as D,a2 as q,cA as M}from"./index-DRp6xo3j.js";const U={class:"skeleton-item-phone selectable-card-skeleton"},V={class:"phone-content"},F={class:"subtitle-container"},T={key:0,class:"actions"},L=b({__name:"SkeletonItemPhone",props:{titleWidth:{default:"70%"},subtitles:{default:()=>[{width:"60%",height:"18px"}]},actionCount:{default:0}},setup(r){return(n,o)=>(p(),h("section",U,[o[0]||(o[0]=k("div",{class:"phone-left"},[k("div",{class:"skeleton-checkbox"}),k("div",{class:"skeleton-image"})],-1)),k("div",V,[k("div",{class:"title skeleton-text",style:K({width:n.titleWidth})},null,4),k("div",F,[(p(!0),h(S,null,N(n.subtitles,(t,e)=>(p(),h("div",{key:e,class:"subtitle skeleton-text",style:K({width:t.width,height:t.height||"16px"})},null,4))),128))]),n.actionCount?(p(),h("div",T,[(p(!0),h(S,null,N(n.actionCount,t=>(p(),h("div",{key:t,class:"skeleton-action-square"}))),128))])):P("",!0)])]))}}),j=w(L,[["__scopeId","data-v-de17b1f9"]]),O=r=>{const n=d(!1),o=d(!1),t=d(0),e=d([]),a=d(null),c=d([]),l=d(!1),v=s=>{s?n.value=r.value.every(u=>e.value.includes(u.id)):(n.value=!1,o.value=!1)},f=s=>{const u=Math.min(a.value,s),i=Math.max(a.value,s),_=r.value[a.value].id;return r.value.slice(u,i+1).map(m=>m.id).filter(m=>m!==_)},g=(s,u)=>{if(a.value!==null&&a.value!==u&&c.value.length>0){if(l.value)for(const i of c.value)e.value.includes(i)||e.value.push(i);else e.value=e.value.filter(i=>!c.value.includes(i));c.value=[],a.value=u,l.value=e.value.includes(s.id),v(l)}else y(!e.value.includes(s.id),s,u)},y=(s,u,i)=>{s?e.value.push(u.id):e.value=e.value.filter(_=>_!==u.id),a.value=i,l.value=s,v(s)},C=()=>{n.value=!0,e.value=r.value.map(s=>s.id)};return{realAllChecked:o,allChecked:n,toggleAllChecked:s=>{s.target.checked?C():(n.value=!1,o.value=!1,e.value=[])},selectAll:C,allCheckedAlertVisible:B(()=>n.value&&!o.value&&e.value.length<t.value),selectRealAll:()=>{o.value=!0},clearSelection:()=>{n.value=!1,o.value=!1,e.value=[],a.value=null,l.value=!1,c.value=[]},selectedIds:e,total:t,checked:B(()=>e.value.length>0),shouldSelect:l,shiftEffectingIds:c,toggleSelect:(s,u,i)=>{s.shiftKey?g(u,i):y(!e.value.includes(u.id),u,i)},handleItemClick(s,u,i,_=()=>{}){var E;if(((E=s.target)==null?void 0:E.nodeName)==="V-CHECKBOX")return;const m=window.getSelection();if(!(m&&m.toString())){if(e.value.length===0){_(i);return}s.shiftKey?g(u,i):y(!e.value.includes(u.id),u,i)}},handleMouseOver(s,u){s.shiftKey?a.value!==null&&a.value!==u&&(c.value=f(u)):c.value=[]}}},W=(r,n)=>{const{t:o}=A();return{deleteItems:(t,e,a,c)=>{let l=c;if(!e){if(t.length===0){D(o("select_first"),"error");return}l=`ids:${t.join(",")}`}q(M,{gql:r,count:e?a:t.length,variables:()=>({query:l}),done:n})}}};function I(){const r=document.activeElement;return r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.tagName==="SELECT")}const X=(r,n,o,t,e,a,c)=>({keyDown:l=>{var g,y;if(document.querySelector("md-dialog[open]")||document.getElementsByClassName("lightbox").length>0)return;const v=(g=document.getElementsByClassName("scroll-content"))==null?void 0:g[0];l.shiftKey?v==null||v.style.setProperty("user-select","none"):v==null||v.style.removeProperty("user-select");const f=(y=document.getElementsByClassName("scroller"))==null?void 0:y[0];if(l.shiftKey?f==null||f.style.setProperty("user-select","none"):f==null||f.style.removeProperty("user-select"),(l.ctrlKey||l.metaKey)&&l.key==="a"&&!I()){l.preventDefault(),t();return}if(l.key==="Escape")e();else if(l.key==="ArrowLeft")o.value>1&&a(o.value-1);else if(l.key==="ArrowRight"){const C=Math.ceil(r.value/n);o.value<C&&a(o.value+1)}else(l.key==="Delete"||(l.ctrlKey||l.metaKey)&&l.key==="Backspace")&&c()},keyUp:()=>{var v;const l=(v=document.getElementsByClassName("scroll-content"))==null?void 0:v[0];l==null||l.style.removeProperty("user-select")}}),$=(r,n,o)=>({keyDown:t=>{var c,l;if(document.querySelector("md-dialog[open]"))return;const e=(c=document.getElementsByClassName("scroll-content"))==null?void 0:c[0];t.shiftKey?e==null||e.style.setProperty("user-select","none"):e==null||e.style.removeProperty("user-select");const a=(l=document.getElementsByClassName("scroller"))==null?void 0:l[0];if(t.shiftKey?a==null||a.style.setProperty("user-select","none"):a==null||a.style.removeProperty("user-select"),(t.ctrlKey||t.metaKey)&&t.key==="a"&&!I()){t.preventDefault(),r();return}t.key==="Escape"?n():(t.key==="Delete"||(t.ctrlKey||t.metaKey)&&t.key==="Backspace")&&o()},keyUp:()=>{var e;const t=(e=document.getElementsByClassName("scroll-content"))==null?void 0:e[0];t==null||t.style.removeProperty("user-select")}});export{j as _,X as a,W as b,$ as c,O as u};
