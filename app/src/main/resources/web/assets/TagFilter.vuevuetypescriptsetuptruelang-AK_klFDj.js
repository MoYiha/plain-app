import{_ as E}from"./more-vert-CXtvmzn0.js";import{m as F,c as u,o as s,a as n,e as O,u as P,f as R,r as p,h as U,bc as j,D as x,ac as J,a2 as r,ad as K,k as v,N as W,t as l,p as C,M as X,O as q,aO as Y,y as g,a3 as M,Q as w,R as Z,P as ee,$ as f,bI as B,aa as te,A as ne,z as ae,c4 as oe,B as se,i as Q,c5 as ie,c6 as le,c7 as ce}from"./index-BjwOe50_.js";const de={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function re(_,o){return s(),u("svg",de,o[0]||(o[0]=[n("path",{fill:"currentColor",d:"M11 13H6q-.425 0-.712-.288T5 12t.288-.712T6 11h5V6q0-.425.288-.712T12 5t.713.288T13 6v5h5q.425 0 .713.288T19 12t-.288.713T18 13h-5v5q0 .425-.288.713T12 19t-.712-.288T11 18z"},null,-1)]))}const ue=F({name:"material-symbols-add-rounded",render:re}),_e={class:"top-app-bar"},me={class:"btn-icon no-click"},pe={class:"title"},ve={class:"actions"},ge={class:"nav"},fe=["onClick"],he={class:"title"},ye={class:"count"},Te=["anchor","open"],be={slot:"headline"},ke={slot:"headline"},qe=O({__name:"TagFilter",props:{type:{type:String,required:!0},selected:{type:String,required:!0}},setup(_){const o=_,{t:i}=P(),V=R(),h=p([]),m=p(!1),c=p(),{refetch:d}=U({handle:(e,t)=>{t?x(i(t),"error"):e&&(h.value=e.tags)},document:j,variables:{type:o.type}});function L(e){c.value=e,m.value=!0}function S(e){f(B,{title:i("rename"),placeholder:i("name"),value:e.name,mutation:()=>Q({document:ie}),getVariables:t=>({id:e.id,name:t}),done:()=>{d()}})}function D(e){f(te,{id:e.id,name:e.name,gql:le,typeName:"Tag"})}function G(){f(B,{title:i("add_tag"),placeholder:i("name"),mutation:()=>Q({document:ce,options:{update:()=>{d()}}}),getVariables:e=>({type:o.type,name:e})})}function I(e){const t=ne([{name:"tag_id",op:"",value:e.id}]);ae(V,`/${oe[o.type]}?q=${se(t)}`)}const y=e=>{e===o.type&&d()},T=e=>{e.type===o.type&&d()};return J(()=>{r.on("refetch_tags",y),r.on("media_items_actioned",T)}),K(()=>{r.off("refetch_tags",y),r.off("media_items_actioned",T)}),(e,t)=>{var $;const N=W,z=ue,b=Y,H=E,k=X("tooltip");return s(),u(w,null,[n("div",_e,[n("div",me,[v(N)]),n("div",pe,l(e.$t("tags")),1),n("div",ve,[C((s(),q(b,{onClick:g(G,["prevent"])},{icon:M(()=>[v(z)]),_:1})),[[k,e.$t("add_tag")]])])]),n("ul",ge,[(s(!0),u(w,null,Z(h.value,a=>(s(),u("li",{key:a.id,class:ee({active:a.id===_.selected}),onClick:g(A=>I(a),["prevent"])},[n("span",he,l(a.name),1),C((s(),q(b,{id:"tag-"+a.id,class:"sm",onClick:g(A=>L(a),["prevent","stop"])},{icon:M(()=>[v(H)]),_:2},1032,["id","onClick"])),[[k,e.$t("actions")]]),n("span",ye,l(a.count.toLocaleString()),1)],10,fe))),128))]),n("md-menu",{positioning:"popover",anchor:"tag-"+(($=c.value)==null?void 0:$.id),"stay-open-on-focusout":"",quick:"",open:m.value,onClosed:t[2]||(t[2]=a=>m.value=!1)},[n("md-menu-item",{onClick:t[0]||(t[0]=a=>S(c.value))},[n("div",be,l(e.$t("rename")),1)]),n("md-menu-item",{onClick:t[1]||(t[1]=a=>D(c.value))},[n("div",ke,l(e.$t("delete")),1)])],40,Te)],64)}}});export{qe as _,ue as a};
