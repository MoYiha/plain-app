import{_ as q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-B2DTyU_S.js";import{_ as I}from"./TagFilter-g5V5BBTg.js";import{e as M,f as N,s as Q,g as R,I as V,r as m,L as A,w as x,R as z,o as u,p as g,a5 as y,a3 as F,a6 as j,a as t,k as D,c as _,y as h,S,j as C,t as a,l as k,U as E,T as G,F as P,B as U,A as B,C as H}from"./index-CextXMl7.js";import{u as J}from"./search-CYaYXsFn.js";import"./more-vert-PFQlu6Bi.js";import"./VIconButton.vuevuetypescriptsetuptruelang-BlGK_fBO.js";const K={class:"nav"},O={class:"title"},W={key:0,class:"count"},X=["onClick"],Y={class:"title"},Z={key:0,class:"count"},re=M({__name:"MessagesSidebar",setup(ee){const d=N(),{counter:p}=Q(R()),{parseQ:T}=J(),o=V({tagIds:[]}),n=m(""),c=m(""),l=m(new Map),{fetch:$}=A({handle:e=>{e&&(p.value.messages=e.total,l.value.set("1",e.inbox),l.value.set("2",e.sent),l.value.set("3",e.drafts))},document:j,variables:()=>({})});function v(e){return l.value.get(e)??-1}function f(){var i;const e=y.currentRoute.value,r=F(((i=e.query.q)==null?void 0:i.toString())??"");T(o,r),n.value=o.type??"",c.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(c.value=""),$()}f(),x(()=>y.currentRoute.value,()=>{f()});function b(e){const r=U([{name:"type",op:"",value:e}]);B(d,`/messages?q=${H(r)}`)}function w(){B(d,"/messages")}return(e,r)=>{const i=I,L=q;return u(),z(L,null,{title:g(()=>[P(a(e.$t("page_title.messages")),1)]),body:g(()=>[t("ul",K,[t("li",{class:S({active:!c.value&&!n.value}),onClick:h(w,["prevent"])},[t("span",O,a(e.$t("all")),1),k(p).messages>=0?(u(),_("span",W,a(k(p).messages.toLocaleString()),1)):C("",!0)],2),(u(),_(G,null,E(["1","2","3"],s=>t("li",{key:s,class:S({active:s===n.value}),onClick:h(se=>b(s),["prevent"])},[t("span",Y,a(e.$t(`message_type.${s}`)),1),v(s)>=0?(u(),_("span",Z,a(v(s).toLocaleString()),1)):C("",!0)],10,X)),64))]),D(i,{type:"SMS",selected:c.value},null,8,["selected"])]),_:1})}}});export{re as default};
