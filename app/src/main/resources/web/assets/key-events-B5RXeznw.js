import{d as F,o as s,c as n,O as y,V as N,t as q,a as c,w as K,N as te,u as le,I as oe,aC as B,h as S,S as se,e as C,p as w,P as I,x as z,y as ne,A as ae,bS as D,f as ie,bB as re,a1 as ue,F as ce,G as de,H as he,g as fe,C as ve,Y as _e,bT as me}from"./index-BxNI00MG.js";import{_ as ye}from"./rss-feed-rounded-Dj4EQ17i.js";import{u as pe}from"./search-D1_YTViL.js";const bt=F({__name:"AllCheckedAlert",props:{limit:{type:Number,required:!0},total:{type:Number,required:!0},allCheckedAlertVisible:{type:Boolean,required:!0},realAllChecked:{type:Boolean,required:!0},selectRealAll:{type:Function},clearSelection:{type:Function}},setup(o){return(h,v)=>(s(),n("div",{class:te(["alert-info alert-all-checked",{show:o.allCheckedAlertVisible||o.realAllChecked}])},[o.allCheckedAlertVisible?(s(),n(y,{key:0},[N(q(h.$t("all_items_on_this_page_are_selected",{count:o.limit}))+" ",1),c("a",{href:"#",onClick:v[0]||(v[0]=K((...p)=>o.selectRealAll&&o.selectRealAll(...p),["prevent"]))},q(h.$t("select_all_items",{count:o.total})),1)],64)):(s(),n(y,{key:1},[N(q(h.$t("all_items_are_selected",{count:o.total}))+" ",1),c("a",{href:"#",onClick:v[1]||(v[1]=K((...p)=>o.clearSelection&&o.clearSelection(...p),["prevent"]))},q(h.$t("clear_selection")),1)],64))],2))}}),be={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ke=c("path",{fill:"currentColor",d:"M9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l5.6 5.6q.275.275.275.7t-.275.7t-.7.275t-.7-.275l-5.6-5.6q-.75.6-1.725.95T9.5 16m0-2q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"},null,-1),Te=[ke];function ge(o,h){return s(),n("svg",be,[...Te])}const Ce={name:"material-symbols-search-rounded",render:ge},qe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$e=c("path",{fill:"currentColor",d:"M7.425 9.475L11.15 3.4q.15-.25.375-.363T12 2.925t.475.113t.375.362l3.725 6.075q.15.25.15.525t-.125.5t-.35.363t-.525.137h-7.45q-.3 0-.525-.137T7.4 10.5t-.125-.5t.15-.525M17.5 22q-1.875 0-3.187-1.312T13 17.5t1.313-3.187T17.5 13t3.188 1.313T22 17.5t-1.312 3.188T17.5 22M3 20.5v-6q0-.425.288-.712T4 13.5h6q.425 0 .713.288T11 14.5v6q0 .425-.288.713T10 21.5H4q-.425 0-.712-.288T3 20.5m14.5-.5q1.05 0 1.775-.725T20 17.5t-.725-1.775T17.5 15t-1.775.725T15 17.5t.725 1.775T17.5 20M5 19.5h4v-4H5zM10.05 9h3.9L12 5.85zm7.45 8.5"},null,-1),Ie=[$e];function Se(o,h){return s(),n("svg",qe,[...Ie])}const we={name:"material-symbols-category-outline-rounded",render:Se},Ae={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Me=c("path",{fill:"currentColor",d:"M7 21q-.825 0-1.412-.587T5 19V6q-.425 0-.712-.288T4 5t.288-.712T5 4h4q0-.425.288-.712T10 3h4q.425 0 .713.288T15 4h4q.425 0 .713.288T20 5t-.288.713T19 6v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zm-7 11q.425 0 .713-.288T11 16V9q0-.425-.288-.712T10 8t-.712.288T9 9v7q0 .425.288.713T10 17m4 0q.425 0 .713-.288T15 16V9q0-.425-.288-.712T14 8t-.712.288T13 9v7q0 .425.288.713T14 17M7 6v13z"},null,-1),Be=[Me];function Ve(o,h){return s(),n("svg",Ae,[...Be])}const Ke={name:"material-symbols-delete-outline-rounded",render:Ve},Re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ne=c("path",{fill:"currentColor",d:"M9 16.5q-1.05 0-1.775-.725T6.5 14t.725-1.775T9 11.5t1.775.725T11.5 14t-.725 1.775T9 16.5M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z"},null,-1),ze=[Ne];function De(o,h){return s(),n("svg",Re,[...ze])}const Fe={name:"material-symbols-today-outline-rounded",render:De},Ee=o=>(ce("data-v-7de1e767"),o=o(),de(),o),He={key:0},Oe={key:"filter-text"},Pe=["label"],Le={key:"filter-today"},Ue=["label"],je={key:"filter-trash"},Ge=["label"],Xe=["label"],Qe=["label"],Ye=["label"],Je=["label","onRemove"],We=Ee(()=>c("md-ripple",null,null,-1)),Ze=["open"],xe={class:"filters"},et={class:"form-row"},tt=["label"],lt={key:0},ot=["label","selected"],st={key:1},nt=["label","selected"],at={class:"form-label"},it=["label","selected","onClick"],rt={class:"form-label"},ut=["label","selected","onClick"],ct={class:"form-label"},dt=["label","selected","onClick"],ht={class:"form-label"},ft=["label","selected","onClick"],vt={class:"buttons"},_t=F({__name:"SearchInput",props:{filter:{type:Object,required:!0},getUrl:{type:Function,required:!0},tags:{type:Array,default:[]},feeds:{type:Array,default:[]},buckets:{type:Array,default:[]},types:{type:Array,default:[]},showChips:{type:Boolean,default:!0},showToday:{type:Boolean,default:!1},showTrash:{type:Boolean,default:!1}},emits:["show"],setup(o,{expose:h,emit:v}){const{copyFilter:p,buildQ:r}=pe(),f=le(),t=oe({tagIds:[]}),e=o,m=B(()=>(e.tags??[]).filter(i=>{var b;return(b=e.filter.tagIds)==null?void 0:b.includes(i.id)})),g=B(()=>(e.feeds??[]).filter(i=>e.filter.feedId===i.id)),A=B(()=>(e.buckets??[]).filter(i=>e.filter.bucketId===i.id)),$=B(()=>(e.types??[]).filter(i=>e.filter.type===i.id)),M=S(!1);function u(i){t.tagIds.includes(i.id)?D(t.tagIds,b=>b===i.id):t.tagIds.push(i.id)}function a(i){t.feedId===i.id?t.feedId=void 0:t.feedId=i.id}function d(i){t.bucketId===i.id?t.bucketId=void 0:t.bucketId=i.id}function k(i){t.type===i.id?t.type=void 0:t.type=i.id}function T(){p(t,e.filter),_(),R()}function _(){ie(f,e.getUrl(r(e.filter)))}function E(){e.filter.feedId=void 0,_()}function H(){e.filter.type=void 0,_()}function O(){e.filter.bucketId=void 0,_()}function P(i){D(e.filter.tagIds??[],b=>b===i.id),_()}function L(){e.filter.today=void 0,_()}function U(){e.filter.trash=!1,_()}function j(){e.filter.text=void 0,_()}function G(){M.value=!0,p(e.filter,t)}function R(){M.value=!1}return h({dismiss:R}),(i,b)=>{const X=Fe,Q=Ke,Y=re,J=ye,W=we,Z=ue,x=Ce,ee=se("tooltip");return s(),n(y,null,[o.showChips?(s(),n("md-chip-set",He,[e.filter.text?(s(),n("div",Oe,[c("md-input-chip",{label:e.filter.text,"remove-only":"",onRemove:j},null,40,Pe)])):C("",!0),e.filter.today?(s(),n("div",Le,[c("md-input-chip",{label:i.$t("today"),"remove-only":"",onRemove:L},[w(X,{slot:"icon"})],40,Ue)])):C("",!0),e.filter.trash?(s(),n("div",je,[c("md-input-chip",{label:i.$t("trash"),"remove-only":"",onRemove:U},[w(Q,{slot:"icon"})],40,Ge)])):C("",!0),(s(!0),n(y,null,I(A.value,l=>(s(),n("md-input-chip",{key:l.id,label:l.name,"remove-only":"",onRemove:O},[w(Y,{slot:"icon"})],40,Xe))),128)),(s(!0),n(y,null,I(g.value,l=>(s(),n("md-input-chip",{key:l.id,label:l.name,"remove-only":"",onRemove:E},[w(J,{slot:"icon"})],40,Qe))),128)),(s(!0),n(y,null,I($.value,l=>(s(),n("md-input-chip",{key:l.id,label:l.name,"remove-only":"",onRemove:H},[w(W,{slot:"icon"})],40,Ye))),128)),(s(!0),n(y,null,I(m.value,l=>(s(),n("md-input-chip",{key:l.id,label:l.name,"remove-only":"",onRemove:V=>P(l)},[w(Z,{slot:"icon"})],40,Je))),128))])):C("",!0),z((s(),n("button",{id:"btn-search",class:"btn-icon",onClick:K(G,["prevent"])},[We,w(x)])),[[ee,i.$t("search")]]),c("md-menu",{positioning:"popover",anchor:"btn-search","menu-corner":"start-end","anchor-corner":"end-end","stay-open-on-focusout":"",quick:"",open:M.value,onClosed:R},[c("div",xe,[c("div",et,[z(c("md-outlined-text-field",{label:i.$t("keywords"),"onUpdate:modelValue":b[0]||(b[0]=l=>t.text=l),onKeyup:ae(T,["enter"])},null,40,tt),[[ne,t.text]])]),e.showToday?(s(),n("md-chip-set",lt,[c("md-filter-chip",{key:"chip-today",label:i.$t("today"),selected:t.today,onClick:b[1]||(b[1]=l=>t.today=!t.today)},null,8,ot)])):C("",!0),e.showTrash?(s(),n("md-chip-set",st,[c("md-filter-chip",{key:"chip-today",label:i.$t("trash"),selected:t.trash,onClick:b[2]||(b[2]=l=>t.trash=!t.trash)},null,8,nt)])):C("",!0),e.tags.length>0?(s(),n(y,{key:2},[c("label",at,q(i.$t("tags")),1),c("md-chip-set",null,[(s(!0),n(y,null,I(o.tags,l=>(s(),n("md-filter-chip",{key:l.id,label:l.name,selected:t.tagIds.includes(l.id),onClick:V=>u(l)},null,8,it))),128))])],64)):C("",!0),e.feeds.length>0?(s(),n(y,{key:3},[c("label",rt,q(i.$t("page_title.feeds")),1),c("md-chip-set",null,[(s(!0),n(y,null,I(o.feeds,l=>(s(),n("md-filter-chip",{key:l.id,label:l.name,selected:t.feedId===l.id,onClick:V=>a(l)},null,8,ut))),128))])],64)):C("",!0),e.buckets.length>0?(s(),n(y,{key:4},[c("label",ct,q(i.$t("folders")),1),c("md-chip-set",null,[(s(!0),n(y,null,I(o.buckets,l=>(s(),n("md-filter-chip",{key:l.id,label:l.name,selected:t.bucketId===l.id,onClick:V=>d(l)},null,8,dt))),128))])],64)):C("",!0),e.types.length>0?(s(),n(y,{key:5},[c("label",ht,q(i.$t("types")),1),c("md-chip-set",null,[(s(!0),n(y,null,I(o.types,l=>(s(),n("md-filter-chip",{key:l.id,label:l.name,selected:t.type===l.id,onClick:V=>k(l)},null,8,ft))),128))])],64)):C("",!0),c("div",vt,[c("md-filled-button",{onClick:K(T,["stop"])},q(i.$t("search")),1)])])],40,Ze)],64)}}}),kt=he(_t,[["__scopeId","data-v-7de1e767"]]),Tt=o=>{const h=S(!1),v=S(!1),p=S(0),r=S([]),f=S(null),t=S([]),e=S(!1),m=u=>{u?h.value=o.value.every(a=>r.value.includes(a.id)):(h.value=!1,v.value=!1)},g=(u,a)=>{const d=Math.min(f.value,a),k=Math.max(f.value,a),T=o.value.slice(d,k+1).map(_=>_.id);if(f.value!==null&&f.value!==a&&T.length>0){if(e.value)for(const _ of T)r.value.includes(_)||r.value.push(_);else r.value=r.value.filter(_=>!T.includes(_));f.value=a,e.value=r.value.includes(u.id)}else $(!r.value.includes(u.id),u,a)},A=(u,a)=>{if(f.value!==null&&f.value!==a&&t.value.length>0){if(e.value)for(const d of t.value)r.value.includes(d)||r.value.push(d);else r.value=r.value.filter(d=>!t.value.includes(d));t.value=[],f.value=a,e.value=r.value.includes(u.id),m(e)}else $(!r.value.includes(u.id),u,a)},$=(u,a,d)=>{u?r.value.push(a.id):r.value=r.value.filter(k=>k!==a.id),f.value=d,e.value=u,m(u)},M=()=>{h.value=!0,r.value=o.value.map(u=>u.id)};return{realAllChecked:v,allChecked:h,toggleAllChecked:u=>{u.target.checked?M():(h.value=!1,v.value=!1,r.value=[])},selectAll:M,toggleRow:(u,a,d)=>{if(u.target.nodeName==="MD-CHECKBOX"){const k=u.target.checked;u.shiftKey?g(a,d):$(k,a,d)}else u.shiftKey?g(a,d):$(!r.value.includes(a.id),a,d)},allCheckedAlertVisible:B(()=>h.value&&!v.value&&r.value.length<p.value),selectRealAll:()=>{v.value=!0},clearSelection:()=>{h.value=!1,v.value=!1,r.value=[],f.value=null,e.value=!1,t.value=[]},selectedIds:r,total:p,checked:B(()=>r.value.length>0),shouldSelect:e,shiftEffectingIds:t,toggleSelect:(u,a,d)=>{u.shiftKey?A(a,d):$(!r.value.includes(a.id),a,d)},handleItemClick(u,a,d,k=()=>{}){if(u.target.nodeName==="MD-CHECKBOX")return;const T=window.getSelection();if(!(T&&T.toString())){if(r.value.length===0){k(d);return}u.shiftKey?A(a,d):$(!r.value.includes(a.id),a,d)}},handleMouseOver(u,a){if(u.shiftKey){if(f.value!==null&&f.value!==a){const d=Math.min(f.value,a),k=Math.max(f.value,a),T=o.value[f.value].id;t.value=o.value.slice(d,k+1).map(_=>_.id).filter(_=>_!==T)}}else t.value=[]}}},gt=(o,h)=>{const{t:v}=fe();return{deleteItems:(p,r,f)=>{let t=f;if(!p){if(r.length===0){ve(v("select_first"),"error");return}t=`ids:${r.join(",")}`}_e(me,{gql:o,variables:()=>({query:t}),done:h})}}},Ct=(o,h,v,p,r,f,t)=>({keyDown:e=>{var g;if(document.querySelector("md-dialog[open]"))return;const m=(g=document.getElementsByClassName("scroll-content"))==null?void 0:g[0];if(e.shiftKey?m==null||m.style.setProperty("user-select","none"):m==null||m.style.removeProperty("user-select"),(e.ctrlKey||e.metaKey)&&e.key==="a"){e.preventDefault(),p();return}if(e.key==="Escape")r();else if(e.key==="ArrowLeft")v.value>1&&f(v.value-1);else if(e.key==="ArrowRight"){const A=Math.ceil(o.value/h);v.value<A&&f(v.value+1)}else(e.key==="Delete"||(e.ctrlKey||e.metaKey)&&e.key==="Backspace")&&t()},keyUp:e=>{var g;const m=(g=document.getElementsByClassName("scroll-content"))==null?void 0:g[0];m==null||m.style.removeProperty("user-select")}});export{kt as _,bt as a,Ct as b,gt as c,Ke as d,Tt as u};
