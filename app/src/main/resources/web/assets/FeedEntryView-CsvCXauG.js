import{m as te,c as o,o as n,a as c,e as se,u as ne,r as p,K as oe,s as ae,g as ie,L as de,f as le,i as V,E as w,h as ce,M as re,N as _e,j as C,l as i,d as ve,O as d,k as l,R as ue,y as _,t as q,P as me,$ as pe,F as fe,a0 as ye,Z as ke,Q as ge,cw as be,cx as he,cm as Te,bi as we,cy as Ce,Y as qe,A as H,a1 as $e,a2 as xe,a4 as f,H as Ee}from"./index-Eg2Dz6vI.js";import{_ as Fe}from"./print-outline-rounded-CtGkjc_E.js";import{a as Le,_ as De}from"./add-notes-outline-rounded-C2nV8WlM.js";import{u as Me}from"./markdown-D6ekQ4z-.js";import{u as Ne}from"./feeds-X-F1NM8L.js";const Ve={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function He(Q,r){return n(),o("svg",Ve,r[0]||(r[0]=[c("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.288.713T11 5H5v14h14v-6q0-.425.288-.712T20 12t.713.288T21 13v6q0 .825-.587 1.413T19 21zM19 6.4L10.4 15q-.275.275-.7.275T9 15t-.275-.7t.275-.7L17.6 5H15q-.425 0-.712-.288T14 4t.288-.712T15 3h5q.425 0 .713.288T21 4v5q0 .425-.288.713T20 10t-.712-.288T19 9z"},null,-1)]))}const Qe=te({name:"material-symbols-open-in-new-rounded",render:He}),Se={class:"content"},Ae={key:0},Be={key:1},Re={class:"top-app-bar"},ze={class:"title"},Ge={key:1},Ie=["disabled"],Ke=["href"],Pe={class:"btn-icon sm"},Ue={class:"actions"},Ye={class:"article-title"},je=["innerHTML"],v="FEED_ENTRY",Oe=se({__name:"FeedEntryView",setup(Q){const{t:r}=ne(),$=oe(),y=p($.params.id),s=p(),u=p(""),k=p(),{app:S,urlTokenKey:A}=ae(ie()),{render:x}=Me(S,A),{loading:B,fetch:g}=de({handle:async(e,t)=>{t?w(r(t),"error"):(s.value=e.feedEntry,s.value?u.value=await x(e.feedEntry.content||e.feedEntry.description):u.value="")},document:he,variables:()=>({id:y.value})}),b=le(),{viewFeed:R}=Ne(b);function z(){const e=$.query.q;e?H(b,`/feeds?q=${e}`):H(b,"/feeds")}const{mutate:G,loading:Ze,onDone:I}=V({document:Te});I(()=>{w(r("saved"))}),ce({handle:(e,t)=>{t?w(r(t),"error"):e&&(k.value=e.tags)},document:we,variables:{type:v}});const K=()=>{window.print()};function P(){var e,t;$e(xe,{type:v,tags:k.value,item:{key:(e=s.value)==null?void 0:e.id,title:"",size:0},selected:(t=k.value)==null?void 0:t.filter(h=>{var m;return(m=s.value)==null?void 0:m.tags.some(T=>T.id===h.id)})})}const{mutate:U,loading:E,onDone:Y}=V({document:Ce});Y(async e=>{const t=e.data;s.value=t.syncFeedContent,u.value=await x(t.syncFeedContent.content||t.syncFeedContent.description)});const j=()=>{U({id:y.value})},F=e=>{e.type===v&&g()},L=e=>{e.type===v&&g()};return re(()=>{f.on("item_tags_updated",L),f.on("items_tags_updated",F),g()}),_e(()=>{f.off("item_tags_updated",L),f.off("items_tags_updated",F)}),(e,t)=>{var D,M,N;const h=ke,m=ge,T=qe,O=Le,Z=Qe,J=De,W=Fe,X=be,a=me("tooltip");return n(),o("div",Se,[i(B)&&!s.value?(n(),o("article",Ae,t[2]||(t[2]=[ve('<div class="top-app-bar" data-v-862035f5><div class="title" data-v-862035f5><div class="skeleton-text skeleton-app-bar" data-v-862035f5></div></div><div class="actions" data-v-862035f5><div class="skeleton-image skeleton-icon" data-v-862035f5></div></div></div><div class="article-title" data-v-862035f5><div class="skeleton-text skeleton-title" data-v-862035f5></div></div><div class="md-container" data-v-862035f5><div class="skeleton-text skeleton-content" style="width:100%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:90%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:75%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:85%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:60%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:80%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:70%;" data-v-862035f5></div><div class="skeleton-text skeleton-content" style="width:65%;" data-v-862035f5></div></div>',3)]))):s.value?(n(),o("article",Be,[c("div",Re,[c("div",ze,[s.value.feed?(n(),o("a",{key:0,onClick:t[0]||(t[0]=_(ee=>i(R)(s.value.feed),["stop","prevent"]))},q(s.value.feed.name),1)):C("",!0),s.value?d((n(),o("time",Ge,[fe(q(i(ye)(s.value.publishedAt)),1)])),[[a,i(pe)(s.value.publishedAt)]]):C("",!0),l(h,{tags:(D=s.value)==null?void 0:D.tags,type:v},null,8,["tags"]),d((n(),o("button",{class:"btn-icon sm",style:{"margin-inline-start":"16px"},onClick:_(P,["prevent"])},[l(m)])),[[a,e.$t("add_to_tags")]]),i(E)?(n(),ue(T,{key:2,indeterminate:"",class:"sm"})):d((n(),o("button",{key:3,class:"btn-icon sm",disabled:i(E),onClick:_(j,["prevent"])},[l(O)],8,Ie)),[[a,e.$t("sync_content")]]),d((n(),o("a",{href:(M=s.value)==null?void 0:M.url,class:"btn-icon",target:"_blank"},[c("button",Pe,[l(Z)])],8,Ke)),[[a,e.$t("view_original_article")]]),d((n(),o("button",{class:"btn-icon sm",onClick:t[1]||(t[1]=_(ee=>i(G)({query:`ids:${y.value}`}),["prevent"]))},[l(J)])),[[a,e.$t("save_to_notes")]]),d((n(),o("button",{class:"btn-icon sm",onClick:_(K,["prevent"])},[l(W)])),[[a,e.$t("print")]])]),c("div",Ue,[d((n(),o("button",{class:"btn-icon",onClick:_(z,["prevent"])},[l(X)])),[[a,e.$t("close")]])])]),c("div",Ye,q((N=s.value)==null?void 0:N.title),1),c("div",{class:"md-container",innerHTML:u.value},null,8,je)])):C("",!0)])}}}),st=Ee(Oe,[["__scopeId","data-v-862035f5"]]);export{st as default};
