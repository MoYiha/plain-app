import{_ as rt}from"./VPagination.vuevuetypescriptsetuptruelang-CHD_8v0v.js";import{_ as pt,b as mt,u as _t,a as vt}from"./key-events-cECSsEaK.js";import{e as ce,c as a,J as L,o as l,a as c,d as ft,t as r,m as re,aA as Ae,r as z,aB as De,aC as ze,aD as H,ae as bt,aE as yt,q as w,k as u,ak as ge,l as e,G as M,A as Ee,y as xe,v as ht,x as gt,aF as Be,K as Ke,u as Oe,i as ye,aG as Ue,ab as he,j as C,Z as Pe,U as k,V as q,a8 as Qe,ah as $t,aH as kt,f as Ct,s as wt,g as Vt,L as Tt,M as qt,N as Nt,h as Ut,O as Lt,P as St,Q as P,R as Mt,z as D,al as It,S as Ft,p as At,T as Le,W as Dt,a2 as ue,aI as zt,F as Se,aJ as Et,H as xt,aK as Bt,$ as Kt,a0 as Ot,a1 as Pt,B as Me,a3 as Qt,aL as Ie,ac as Rt,a4 as jt,a5 as ee,aM as Gt,I as Ht}from"./index-DRp6xo3j.js";import{_ as Jt}from"./call-outline-rounded-CPF2tTKf.js";import{_ as Wt}from"./FieldId.vuevuetypescriptsetuptruelang-slfJ4h1L.js";import{_ as Zt,a as Xt,b as Yt}from"./SearchInput-BJwFSU_P.js";import{_ as eo}from"./VCheckbox-COaKMA3E.js";import{_ as to}from"./VSelect-i1taCVLz.js";import{u as oo,a as lo}from"./tags-DBIbojtk.js";import{u as no}from"./search-VN1T4MU3.js";import"./search-rounded-DveNm3Pb.js";const so={key:0,class:"contact-item selectable-card-skeleton"},ao={class:"list-item-start"},io={class:"number"},uo=ce({__name:"ContactSkeletonItem",props:{index:{},isPhone:{type:Boolean}},setup(V){return(_,b)=>{const d=pt;return _.isPhone?(l(),L(d,{key:1,"title-width":"70%",subtitles:[{width:"45%"},{width:"30%"},{width:"40%"}],"action-count":3})):(l(),a("section",so,[c("div",ao,[b[0]||(b[0]=c("div",{class:"skeleton-checkbox"},null,-1)),c("span",io,r(_.index),1)]),b[1]||(b[1]=ft('<div class="image"><div class="skeleton-image lg"></div></div><div class="title"><div class="skeleton-text lg" style="width:50%;"></div></div><div class="subtitle"><div class="skeleton-text" style="width:40%;"></div></div><div class="info"><div class="skeleton-text" style="width:180px;"></div></div><div class="actions"><div class="skeleton-text lg" style="width:120px;"></div></div><div class="time"><div class="skeleton-text" style="width:60px;"></div></div>',6))]))}}}),co={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function ro(V,_){return l(),a("svg",co,_[0]||(_[0]=[c("path",{fill:"currentColor",d:"M3 21v-4.25L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.438.65T21 6.4q0 .4-.137.763t-.438.662L7.25 21zM17.6 7.8L19 6.4L17.6 5l-1.4 1.4z"},null,-1)]))}const po=re({name:"material-symbols-edit",render:ro}),mo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function _o(V,_){return l(),a("svg",mo,_[0]||(_[0]=[c("path",{fill:"currentColor",d:"M12 14q.825 0 1.413-.587T14 12t-.587-1.412T12 10t-1.412.588T10 12t.588 1.413T12 14m-4 4h8v-.575q0-.6-.325-1.1t-.9-.75q-.65-.275-1.338-.425T12 15t-1.437.15t-1.338.425q-.575.25-.9.75T8 17.425zm10 4H6q-.825 0-1.412-.587T4 20V4q0-.825.588-1.412T6 2h7.175q.4 0 .763.15t.637.425l4.85 4.85q.275.275.425.638t.15.762V20q0 .825-.587 1.413T18 22m0-2V8.85L13.15 4H6v16zM6 20V4z"},null,-1)]))}const vo=re({name:"material-symbols-contact-page-outline-rounded",render:_o}),fo={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function bo(V,_){return l(),a("svg",fo,_[0]||(_[0]=[c("path",{fill:"currentColor",d:"M12 13.825L8.1 17.7q-.275.275-.687.288T6.7 17.7q-.275-.275-.275-.7t.275-.7l4.6-4.6q.15-.15.325-.213t.375-.062t.375.062t.325.213l4.6 4.6q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275zm0-6L8.1 11.7q-.275.275-.687.288T6.7 11.7q-.275-.275-.275-.7t.275-.7l4.6-4.6q.15-.15.325-.212T12 5.425t.375.063t.325.212l4.6 4.6q.275.275.288.688t-.288.712q-.275.275-.7.275t-.7-.275z"},null,-1)]))}const yo=re({name:"material-symbols-keyboard-double-arrow-up-rounded",render:bo}),ho={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"};function go(V,_){return l(),a("svg",ho,_[0]||(_[0]=[c("path",{fill:"currentColor",d:"m12 16.175l3.9-3.875q.275-.275.688-.288t.712.288q.275.275.275.7t-.275.7l-4.6 4.6q-.15.15-.325.213t-.375.062t-.375-.062t-.325-.213l-4.6-4.6q-.275-.275-.288-.687T6.7 12.3q.275-.275.7-.275t.7.275zm0-6L15.9 6.3q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7l-4.6 4.6q-.15.15-.325.213t-.375.062t-.375-.062t-.325-.213L6.7 7.7q-.275-.275-.288-.687T6.7 6.3q.275-.275.7-.275t.7.275z"},null,-1)]))}const $o=re({name:"material-symbols-keyboard-double-arrow-down-rounded",render:go});function te(V){return Array.from({length:V},(_,b)=>b+1).concat(-1)}const se={phoneNumberTypes:te(20),emailTypes:te(4),addressTypes:te(3),eventTypes:te(3),imTypes:te(8),websiteTypes:te(7)},ko=ce({__name:"PromptModal",props:{do:{type:Function,required:!0},title:{type:String,required:!0},value:{type:String,default:""}},setup(V){const{handleSubmit:_}=Ae(),b=z(),d=V,{value:y,resetField:E,errorMessage:I}=De("inputValue",ze().required()),J=_(()=>{d.do(String(y.value||"")),H()});return d.value?y.value=d.value:E(),bt(async()=>{await yt(),requestAnimationFrame(()=>{setTimeout(()=>{var g;try{document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur(),(g=b.value)==null||g.focus()}catch($){console.debug("Focus blocked:",$)}},100)})}),(g,$)=>{const W=xe,Q=ge,R=Ee,Z=Be;return l(),L(Z,{onClose:e(H)},{headline:w(()=>[M(r(V.title),1)]),content:w(()=>[u(W,{ref_key:"inputRef",ref:b,modelValue:e(y),"onUpdate:modelValue":$[0]||($[0]=S=>gt(y)?y.value=S:null),class:"form-control",error:!!e(I),"error-text":e(I)?g.$t(e(I)):"",onKeyup:ht(e(J),["enter"])},null,8,["modelValue","error","error-text","onKeyup"])]),actions:w(()=>[u(Q,{value:"cancel",onClick:e(H)},{default:w(()=>[M(r(g.$t("cancel")),1)]),_:1},8,["onClick"]),u(R,{value:"ok",onClick:e(J)},{default:w(()=>[M(r(g.$t("ok")),1)]),_:1},8,["onClick"])]),_:1},8,["onClose"])}}}),Co={class:"form-label"},wo={class:"form-row"},Vo={key:1,class:"v-center"},To={key:0,class:"form-row"},qo={class:"v-center"},No={class:"form-label"},Uo={class:"v-center"},Lo=["onClick"],So={key:1,class:"form-label"},Mo={class:"v-center"},Io=["onClick"],Fo={key:2,class:"form-label"},Ao={class:"v-center"},Do=["onClick"],zo={key:3,class:"form-label"},Eo={class:"v-center"},xo=["onClick"],Bo={key:4,class:"form-label"},Ko={class:"v-center"},Oo=["onClick"],Po={class:"form-row",style:{display:"block",position:"relative"}},Qo={class:"form-row"},Fe=ce({__name:"EditContactModal",props:{data:{type:Object,default:()=>({})},sources:{type:Array,default:()=>[]},done:{type:Function,default:()=>{}}},setup(V){const{handleSubmit:_}=Ae(),b=V,d=Ke({firstName:"",middleName:"",lastName:"",prefix:"",suffix:"",nickname:"",organization:null,notes:"",source:"",starred:0,phoneNumbers:[],emails:[],addresses:[],websites:[],events:[],ims:[],groupIds:[]}),y=z(!1),E=z(!1),{t:I}=Oe(),{mutate:J,loading:g,onDone:$}=ye({document:he`
    mutation createContact($input: ContactInput!) {
      createContact(input: $input) {
        ...ContactFragment
      }
    }
    ${Ue}
  `,options:{update:()=>{b.done()}}}),{mutate:W,loading:Q,onDone:R}=ye({document:he`
    mutation updateContact($id: ID!, $input: ContactInput!) {
      updateContact(id: $id, input: $input) {
        ...ContactFragment
      }
    }
    ${Ue}
  `,options:{update:()=>{b.done()}}}),{value:Z,resetField:S,errorMessage:X}=De("inputValue",ze().test("required",t=>"valid.required",t=>!0).test("target-value",t=>"invalid_value",t=>!0)),x=(t,i)=>{t.splice(0,t.length);for(const v of i)t.push({label:v.label,value:v.value,type:v.type})};(()=>{const t=b.data;t?(Object.assign(d,{firstName:t.firstName,middleName:t.middleName,lastName:t.lastName,prefix:t.prefix,suffix:t.suffix,notes:t.notes}),x(d.phoneNumbers,t.phoneNumbers),x(d.emails,t.emails),x(d.addresses,t.addresses),x(d.websites,t.websites),x(d.events,t.events),x(d.ims,t.ims)):(Object.assign(d,{firstName:"",middleName:"",lastName:"",prefix:"",suffix:"",notes:"",phoneNumbers:[{type:2,value:"",label:""}],emails:[],addresses:[],websites:[],events:[],ims:[]}),S())})();const j=t=>{t.type===-1&&kt(ko,{value:t.label,title:I("custom"),do:i=>{t.label=i}})},ae=(t,i,v)=>i===-1?t.label?t.label:I("custom"):I(`contact.${v}.${i}`),T=(t,i,v)=>t.map(G=>({value:G,label:ae(v,G,i)})),B=t=>{t.push({type:1,value:"",label:""}),E.value=!1},U=(t,i)=>{t.splice(i,1)},pe=_(()=>{var t,i;b.data?W({id:b.data.id,input:d}):(d.source=((i=(t=b.sources)==null?void 0:t[0])==null?void 0:i.name)??"",J({input:d}))});return $(()=>{H()}),R(()=>{H()}),(t,i)=>{const v=xe,G=$o,N=yo,F=to,K=Qe,de=ge,me=$t,_e=Pe,ve=Ee,ie=Be;return l(),L(ie,{onClose:e(H)},{headline:w(()=>[M(r(V.data?t.$t("edit"):t.$t("create")),1)]),content:w(()=>[c("label",Co,r(t.$t("name")),1),c("div",wo,[u(v,{modelValue:d.firstName,"onUpdate:modelValue":i[0]||(i[0]=n=>d.firstName=n),label:t.$t("first_name")},null,8,["modelValue","label"]),y.value?(l(),L(v,{key:0,modelValue:d.middleName,"onUpdate:modelValue":i[1]||(i[1]=n=>d.middleName=n),label:t.$t("middle_name")},null,8,["modelValue","label"])):C("",!0),u(v,{modelValue:d.lastName,"onUpdate:modelValue":i[2]||(i[2]=n=>d.lastName=n),label:t.$t("last_name")},null,8,["modelValue","label"]),y.value?C("",!0):(l(),a("div",Vo,[c("button",{class:"btn-icon",onClick:i[3]||(i[3]=n=>y.value=!0)},[u(G)])]))]),y.value?(l(),a("div",To,[u(v,{modelValue:d.prefix,"onUpdate:modelValue":i[4]||(i[4]=n=>d.prefix=n),label:t.$t("prefix")},null,8,["modelValue","label"]),u(v,{modelValue:d.suffix,"onUpdate:modelValue":i[5]||(i[5]=n=>d.suffix=n),label:t.$t("suffix")},null,8,["modelValue","label"]),c("div",qo,[c("button",{class:"btn-icon",onClick:i[6]||(i[6]=n=>y.value=!1)},[u(N)])])])):C("",!0),c("label",No,r(t.$t("phone_number")),1),(l(!0),a(k,null,q(d.phoneNumbers,(n,h)=>(l(),a("div",{key:h,class:"form-row"},[u(F,{modelValue:n.type,"onUpdate:modelValue":p=>n.type=p,modelModifiers:{number:!0},class:"flex-2",options:T(e(se).phoneNumberTypes,"phone_number_type",n),onChange:p=>j(n)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]),u(v,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,placeholder:t.$t("telephone"),class:"flex-3"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),c("div",Uo,[d.phoneNumbers.length>1?(l(),a("button",{key:0,class:"btn-icon",onClick:p=>U(d.phoneNumbers,h)},[u(K)],8,Lo)):C("",!0)])]))),128)),d.emails.length?(l(),a("label",So,r(t.$t("email")),1)):C("",!0),(l(!0),a(k,null,q(d.emails,(n,h)=>(l(),a("div",{key:h,class:"form-row"},[u(F,{modelValue:n.type,"onUpdate:modelValue":p=>n.type=p,modelModifiers:{number:!0},class:"flex-2",options:T(e(se).emailTypes,"email_type",n),onChange:p=>j(n)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]),u(v,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,label:t.$t("email"),class:"flex-3"},null,8,["modelValue","onUpdate:modelValue","label"]),c("div",Mo,[c("button",{class:"btn-icon",onClick:p=>U(d.emails,h)},[u(K)],8,Io)])]))),128)),d.addresses.length?(l(),a("label",Fo,r(t.$t("address")),1)):C("",!0),(l(!0),a(k,null,q(d.addresses,(n,h)=>(l(),a("div",{key:h,class:"form-row"},[u(F,{modelValue:n.type,"onUpdate:modelValue":p=>n.type=p,modelModifiers:{number:!0},class:"flex-2",options:T(e(se).addressTypes,"address_type",n),onChange:p=>j(n)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]),u(v,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,label:t.$t("address"),class:"flex-3"},null,8,["modelValue","onUpdate:modelValue","label"]),c("div",Ao,[c("button",{class:"btn-icon",onClick:p=>U(d.addresses,h)},[u(K)],8,Do)])]))),128)),d.websites.length?(l(),a("label",zo,r(t.$t("website")),1)):C("",!0),(l(!0),a(k,null,q(d.websites,(n,h)=>(l(),a("div",{key:h,class:"form-row"},[u(F,{modelValue:n.type,"onUpdate:modelValue":p=>n.type=p,modelModifiers:{number:!0},class:"flex-2",options:T(e(se).websiteTypes,"website_type",n),onChange:p=>j(n)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]),u(v,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,placeholder:t.$t("website"),class:"flex-3"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),c("div",Eo,[c("button",{class:"btn-icon",onClick:p=>U(d.websites,h)},[u(K)],8,xo)])]))),128)),d.ims.length?(l(),a("label",Bo,r(t.$t("im")),1)):C("",!0),(l(!0),a(k,null,q(d.ims,(n,h)=>(l(),a("div",{key:h,class:"form-row"},[u(F,{modelValue:n.type,"onUpdate:modelValue":p=>n.type=p,modelModifiers:{number:!0},class:"flex-2",options:T(e(se).imTypes,"im_type",n),onChange:p=>j(n)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]),u(v,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,placeholder:t.$t("im"),class:"flex-3"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),c("div",Ko,[c("button",{class:"btn-icon",onClick:p=>U(d.ims,h)},[u(K)],8,Oo)])]))),128)),c("div",Po,[u(me,{modelValue:E.value,"onUpdate:modelValue":i[12]||(i[12]=n=>E.value=n),placement:"auto",align:"top-left-to-bottom-left"},{trigger:w(()=>[u(de,null,{default:w(()=>[M(r(t.$t("add_field")),1)]),_:1})]),default:w(()=>[c("div",{class:"dropdown-item",onClick:i[7]||(i[7]=()=>B(d.phoneNumbers))},r(t.$t("phone_number")),1),c("div",{class:"dropdown-item",onClick:i[8]||(i[8]=()=>B(d.emails))},r(t.$t("email")),1),c("div",{class:"dropdown-item",onClick:i[9]||(i[9]=()=>B(d.addresses))},r(t.$t("address")),1),c("div",{class:"dropdown-item",onClick:i[10]||(i[10]=()=>B(d.websites))},r(t.$t("website")),1),c("div",{class:"dropdown-item",onClick:i[11]||(i[11]=()=>B(d.ims))},r(t.$t("im")),1)]),_:1},8,["modelValue"])]),c("div",Qo,[u(v,{modelValue:d.notes,"onUpdate:modelValue":i[13]||(i[13]=n=>d.notes=n),type:"textarea",label:t.$t("notes"),rows:3},null,8,["modelValue","label"])])]),actions:w(()=>[u(de,{value:"cancel",onClick:e(H)},{default:w(()=>[M(r(t.$t("cancel")),1)]),_:1},8,["onClick"]),u(ve,{value:"save",disabled:e(g)||e(Q),onClick:e(pe)},{default:w(()=>[e(g)||e(Q)?(l(),L(_e,{key:0,indeterminate:""})):C("",!0),M(" "+r(t.$t("save")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["onClose"])}}}),Ro={class:"top-app-bar"},jo={class:"title"},Go={key:0},Ho={key:1},Jo={class:"btn-icon",style:{display:"none"}},Wo={class:"actions"},Zo={class:"scroll-content"},Xo=["onClick","onMouseover"],Yo={class:"list-item-start"},el={class:"number"},tl=["src"],ol={class:"title"},ll={class:"subtitle"},nl={key:0},sl={class:"info"},al={class:"list-unstyled"},dl=["onClick"],il={class:"actions"},ul=["onClick"],cl=["onClick"],rl=["onClick"],pl={class:"time"},ml={key:0,class:"no-data-placeholder"},oe=50,_l=ce({__name:"ContactsView",setup(V){var qe;const _=At("isPhone"),b=Ct(),{app:d}=wt(Vt()),y=z([]),{t:E}=Oe(),{parseQ:I,buildQ:J}=no(),g=Ke({tagIds:[]}),$=Tt.CONTACT,W=qt(),Q=W.query,R=z(parseInt(((qe=Q.page)==null?void 0:qe.toString())??"1")),Z=z([]),S=z(""),{tags:X,fetch:x}=oo($),{addToTags:j}=lo($,X),{deleteItems:ae}=mt(Gt,()=>{i(),Y(),ee.emit("refetch_tags",$)}),{selectedIds:T,allChecked:B,realAllChecked:U,selectRealAll:pe,allCheckedAlertVisible:t,clearSelection:i,toggleAllChecked:v,toggleSelect:G,total:N,checked:F,shiftEffectingIds:K,handleItemClick:de,handleMouseOver:me,selectAll:_e,shouldSelect:ve}=_t(y),ie=o=>{const f=W.query.q;Me(b,f?`/contacts?page=${o}&q=${f}`:`/contacts?page=${o}`)},{keyDown:n,keyUp:h}=vt(N,oe,R,_e,i,ie,()=>{ae(T.value,U.value,N.value,S.value)}),{loading:p,fetch:Y}=Nt({handle:(o,f)=>{f?Se(E(f),"error"):o&&(y.value=o.contacts,N.value=o.contactCount)},document:zt,variables:()=>({offset:(R.value-1)*oe,limit:oe,query:S.value})});Ut({handle:(o,f)=>{f?Se(E(f),"error"):o&&(Z.value=o.contactSources)},document:Et,variables:null});const $e=o=>{o.type===$&&(i(),Y())},ke=o=>{o.type===$&&Y()};function Re(o){ue(Qt,{type:$,tags:X.value,item:{key:o.id,title:"",size:0},selected:X.value.filter(f=>o.tags.some(A=>A.id===f.id))})}function Ce(o){let f="";Ie(o.firstName)||Ie(o.lastName)?f=`${o.lastName}${o.middleName}${o.firstName}`:f=[o.firstName,o.middleName,o.lastName].filter(fe=>fe).join(" ");const A=o.suffix?`, ${o.suffix}`:"",le=`${o.prefix} ${f} ${A}`.trim();return le||(o.emails.length?o.emails[0].value:"")}function je(o){ue(Rt,{id:o.id,name:Ce(o),gql:he`
      mutation DeleteContact($query: String!) {
        deleteContacts(query: $query)
      }
    `,variables:()=>({query:`ids:${o.id}`}),typeName:"Contact",done:()=>{N.value--,o.tags.length&&ee.emit("refetch_tags",$)}})}function Ge(o){ue(Fe,{data:o,sources:Z,done:Y})}function He(){ue(Fe,{data:null,sources:Z,done:Y})}function we(o){return o?`/contacts?q=${o}`:"/contacts"}const Ve=z(""),Te=z(0),{mutate:Je,loading:We}=ye({document:xt});function Ze(o,f,A){Ve.value=o,Te.value=A,Je({number:f})}function Xe(o){Object.assign(g,o),Me(b,we(J(g)))}return Lt(()=>{var o;S.value=jt(((o=Q.q)==null?void 0:o.toString())??""),I(g,S.value),x(),Y(),ee.on("item_tags_updated",ke),ee.on("items_tags_updated",$e),window.addEventListener("keydown",n),window.addEventListener("keyup",h)}),St(()=>{ee.off("item_tags_updated",ke),ee.off("items_tags_updated",$e),window.removeEventListener("keydown",n),window.removeEventListener("keyup",h)}),(o,f)=>{const A=eo,le=Qe,fe=It,Ne=Ft,Ye=Zt,et=ge,tt=Yt,ot=Xt,lt=Wt,nt=vo,st=Kt,at=Pe,dt=Jt,it=po,ut=uo,ct=rt,O=Mt("tooltip");return l(),a(k,null,[c("div",Ro,[u(A,{"touch-target":"wrapper",checked:e(B),indeterminate:!e(B)&&e(F),onChange:e(v)},null,8,["checked","indeterminate","onChange"]),c("div",jo,[e(T).length?(l(),a("span",Go,r(o.$t("x_selected",{count:e(U)?e(N).toLocaleString():e(T).length.toLocaleString()})),1)):(l(),a("span",Ho,r(o.$t("page_title.contacts"))+" ("+r(e(N).toLocaleString())+")",1)),e(F)?(l(),a(k,{key:2},[P((l(),a("button",{class:"btn-icon",onClick:f[0]||(f[0]=D(m=>e(ae)(e(T),e(U),e(N),S.value),["stop"]))},[u(le)])),[[O,o.$t("delete")]]),P((l(),a("button",Jo,[u(fe)])),[[O,o.$t("download")]]),P((l(),a("button",{class:"btn-icon",onClick:f[1]||(f[1]=D(m=>e(j)(e(T),e(U),S.value),["stop"]))},[u(Ne)])),[[O,o.$t("add_to_tags")]])],64)):C("",!0)]),c("div",Wo,[u(Ye,{filter:g,tags:e(X),"get-url":we,"show-chips":!e(_),"is-phone":e(_)},null,8,["filter","tags","show-chips","is-phone"]),u(et,{class:"btn-sm",onClick:He},{default:w(()=>[M(r(o.$t("create")),1)]),_:1})])]),e(_)?(l(),L(tt,{key:0,class:"mobile-search-filters",filter:g,tags:e(X),feeds:[],buckets:[],types:[],onFilterChange:Xe},null,8,["filter","tags"])):C("",!0),u(ot,{limit:oe,total:e(N),"all-checked-alert-visible":e(t),"real-all-checked":e(U),"select-real-all":e(pe),"clear-selection":e(i)},null,8,["total","all-checked-alert-visible","real-all-checked","select-real-all","clear-selection"]),c("div",Zo,[c("div",{class:Le(["contact-list",{"select-mode":e(F)}])},[(l(!0),a(k,null,q(y.value,(m,ne)=>(l(),a("section",{key:m.id,class:Le(["contact-item selectable-card",{selected:e(T).includes(m.id),selecting:e(K).includes(m.id)}]),onClick:D(s=>e(de)(s,m,ne,()=>{}),["stop"]),onMouseover:s=>e(me)(s,ne)},[c("div",Yo,[e(K).includes(m.id)?(l(),L(A,{key:0,class:"checkbox","touch-target":"wrapper",checked:e(ve),onClick:D(s=>e(G)(s,m,ne),["stop"])},null,8,["checked","onClick"])):(l(),L(A,{key:1,class:"checkbox","touch-target":"wrapper",checked:e(T).includes(m.id),onClick:D(s=>e(G)(s,m,ne),["stop"])},null,8,["checked","onClick"])),c("span",el,[u(lt,{id:ne+1,raw:m},null,8,["id","raw"])])]),m.thumbnailId?(l(),a("img",{key:0,class:"image",src:e(Bt)(m.thumbnailId),width:"50"},null,8,tl)):(l(),L(nt,{key:1,class:"image"})),c("div",ol,r(Ce(m)),1),c("div",ll,[m.notes?(l(),a("span",nl,r(m.notes),1)):C("",!0),u(st,{tags:m.tags,type:e($),"only-links":!0},null,8,["tags","type"])]),c("div",sl,[c("ul",al,[(l(!0),a(k,null,q(m.phoneNumbers,(s,be)=>(l(),a("li",{key:be,class:"phone-number"},[M(r(s.type>0?o.$t(`contact.phone_number_type.${s.type}`):s.label)+" "+r(s.normalizedNumber||s.value)+" ",1),e(We)&&Ve.value===m.id&&Te.value===be?(l(),L(at,{key:0,indeterminate:"",class:"sm"})):P((l(),a("button",{key:1,class:"btn-icon sm",onClick:D(vl=>Ze(m.id,s.normalizedNumber||s.value,be),["stop"])},[u(dt)],8,dl)),[[O,o.$t("make_a_phone_call")]])]))),128)),(l(!0),a(k,null,q(m.emails,s=>(l(),a("li",{key:s.type+s.value},r(s.type>0?o.$t(`contact.email_type.${s.type}`):s.label)+" "+r(s.value),1))),128)),(l(!0),a(k,null,q(m.addresses,s=>(l(),a("li",{key:s.type+s.value},r(s.type>0?o.$t(`contact.address_type.${s.type}`):s.label)+" "+r(s.value),1))),128)),(l(!0),a(k,null,q(m.websites,s=>(l(),a("li",{key:s.type+s.value},r(s.type>0?o.$t(`contact.website_type.${s.type}`):s.label)+" "+r(s.value),1))),128)),(l(!0),a(k,null,q(m.ims,s=>(l(),a("li",{key:s.type+s.value},r(s.type>0?o.$t(`contact.im_type.${s.type}`):s.label)+" "+r(s.value),1))),128)),(l(!0),a(k,null,q(m.events,s=>(l(),a("li",{key:s.type+s.value},r(s.type>0?o.$t(`contact.event_type.${s.type}`):s.label)+" "+r(s.value),1))),128))])]),c("div",il,[P((l(),a("button",{class:"btn-icon sm",onClick:D(s=>je(m),["stop"])},[u(le)],8,ul)),[[O,o.$t("delete")]]),P((l(),a("button",{class:"btn-icon sm",onClick:D(s=>Ge(m),["stop"])},[u(it)],8,cl)),[[O,o.$t("edit")]]),P((l(),a("button",{class:"btn-icon sm",onClick:D(s=>Re(m),["stop"])},[u(Ne)],8,rl)),[[O,o.$t("add_to_tags")]])]),c("div",pl,[P((l(),a("span",null,[M(r(e(Pt)(m.updatedAt)),1)])),[[O,e(Ot)(m.updatedAt)]])])],42,Xo))),128)),e(p)&&y.value.length===0?(l(),a(k,{key:0},q(20,m=>u(ut,{key:m,index:m,"is-phone":e(_)},null,8,["index","is-phone"])),64)):C("",!0)],2),!e(p)&&y.value.length===0?(l(),a("div",ml,r(o.$t(e(Dt)(e(p),e(d).permissions,"WRITE_CONTACTS"))),1)):C("",!0),e(N)>oe?(l(),L(ct,{key:1,page:R.value,go:ie,total:e(N),limit:oe},null,8,["page","total"])):C("",!0)])],64)}}}),ql=Ht(_l,[["__scopeId","data-v-59bc3981"]]);export{ql as default};
