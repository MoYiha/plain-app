import{d as X,g as K,h as b,i as P,s as W,bC as j,j as H,aC as J,c as o,a as l,t as c,x as Q,w as V,p as q,e as d,V as m,m as a,O as w,P as Y,ao as Z,br as ee,S as te,o as n,N as se,bs as ae,bt as oe,ay as ne,U as le,E as ce,X as ie,F as de,G as re,bu as ue,bw as S,ah as E,bx as g,by as pe,ap as he,bA as _e,H as me}from"./index-BxNI00MG.js";const ke=p=>(de("data-v-b46952aa"),p=p(),re(),p),ve={class:"top-app-bar"},be={class:"title"},we={class:"actions"},ge=ke(()=>l("md-ripple",null,null,-1)),ye={class:"form-check-label"},fe=["checked"],Ce={class:"panel-container"},De={key:0,class:"file-items"},Ie=["onClick","onDblclick","onContextmenu"],Te=["checked"],Ve=["src"],Se={class:"title"},Ee={style:{"font-size":"0.75rem"}},Fe={key:1,class:"no-data-placeholder"},xe={key:0,class:"file-item-info"},Re=X({__name:"FilesRecentView",setup(p){const{t:k}=K(),F=b([]),u=b(!1),y=P(),{app:f,urlTokenKey:h}=W(y),{loading:x,files:r}=j(h),{downloadFile:C,downloadDir:R,downloadFiles:N}=Z(h),{view:D}=_e(F,(e,t)=>{y.lightbox={sources:e,index:t,visible:!0}}),_=b(null),{mutate:A,onDone:$}=H({document:ee,appApi:!0});$(e=>{N(e.data.setTempValue.key),r.value.forEach(t=>{t.checked=!1})});const I=()=>{const e=[];return r.value.forEach(t=>{t.checked&&e.push({path:t.path})}),e};function B(e){u.value=e.target.checked}const M=()=>{A({key:ue(),value:JSON.stringify(I())})},O=J(()=>I().length>0);function U(e){if(u.value){e.checked=!e.checked;return}_.value=e}function z(e){S(e.name)?window.open(E(h.value,e.path),"_blank"):g(e.name)?D(r.value,e):C(e.path)}function G(e,t){e.preventDefault();let i;t.isDir?i=[{label:k("download"),onClick:()=>{R(t.path)}}]:(i=[],(S(t.name)||g(t.name))&&i.push({label:k("open"),onClick:()=>{g(t.name)?D(r.value,t):window.open(E(h.value,t.path),"_blank")}}),i.push({label:k("download"),onClick:()=>{C(t.path)}})),pe({x:e.x,y:e.y,items:i})}return(e,t)=>{const i=he,L=te("tooltip");return n(),o(w,null,[l("div",ve,[l("div",be,c(e.$t("recent_files")),1),l("div",we,[u.value&&O.value?Q((n(),o("button",{key:0,class:"btn-icon",onClick:V(M,["stop"])},[ge,q(i)])),[[L,e.$t("download")]]):d("",!0),l("label",ye,[l("md-checkbox",{"touch-target":"wrapper",onChange:B,checked:u.value},null,40,fe),m(c(e.$t("select_mode")),1)])])]),l("div",Ce,[a(f).permissions.includes("WRITE_EXTERNAL_STORAGE")?(n(),o("div",De,[(n(!0),o(w,null,Y(a(r),s=>{var T;return n(),o("div",{key:s.path,class:se(["file-item",{active:((T=_.value)==null?void 0:T.path)===s.path}]),onClick:v=>U(s),onDblclick:V(v=>z(s),["prevent"]),onContextmenu:v=>G(v,s)},[u.value?(n(),o("md-checkbox",{key:0,"touch-target":"wrapper",checked:s.checked},null,8,Te)):d("",!0),a(ae)(s.name)||a(oe)(s.name)?(n(),o("img",{key:1,src:a(ne)(s.fileId,"&w=50&h=50"),width:"50",height:"50",onerror:"this.src='/broken-image.png'"},null,8,Ve)):d("",!0),l("div",Se,[m(c(s.name)+" ",1),l("div",Ee,[m(c(a(le)(s.updatedAt)),1),s.isDir?d("",!0):(n(),o(w,{key:0},[m(", "+c(a(ce)(s.size)),1)],64))])])],42,Ie)}),128))])):d("",!0),a(r).length===0?(n(),o("div",Fe,c(e.$t(a(ie)(a(x),a(f).permissions,"WRITE_EXTERNAL_STORAGE"))),1)):d("",!0)]),_.value?(n(),o("div",xe,c(e.$t("path"))+": "+c(_.value.path),1)):d("",!0)],64)}}}),Ae=me(Re,[["__scopeId","data-v-b46952aa"]]);export{Ae as default};
