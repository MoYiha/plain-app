import{_ as A}from"./LeftSidebar.vuevuetypescriptsetuptruelang-CbD4UtEo.js";import{_ as I}from"./TagFilter.vuevuetypescriptsetuptruelang-kcO_p9MB.js";import{e as M,f as N,s as R,g as V,G as z,r as p,J as D,w as G,ab as P,a1 as h,ac as j,O as x,o as u,a2 as C,a3 as k,a0 as E,ad as F,a,k as H,c as _,y as S,P as B,j as $,t as s,l as L,R as J,Q as O,X as U,A as X,z as b,B as K}from"./index-BaWXnnLZ.js";import{u as W}from"./search-brnXFXDL.js";import"./more-vert-DylU1d9b.js";import"./IconButton.vuevuetypescriptsetuptruelang-CHMhruVe.js";const Y={class:"nav"},Z={class:"title"},ee={key:0,class:"count"},te=["onClick"],ae={class:"title"},se={key:0,class:"count"},pe=M({__name:"CallsSidebar",setup(oe){const m=N(),{counter:d}=R(V()),{parseQ:w}=W(),o=z({tagIds:[]}),n=p(""),l=p(""),c=p(new Map),{fetch:f}=D({handle:e=>{e&&(d.value.calls=e.total,c.value.set("1",e.incoming),c.value.set("2",e.outgoing),c.value.set("3",e.missed))},document:F,variables:()=>({})});function v(e){return c.value.get(e)??-1}function y(){var i;const e=k.currentRoute.value,r=E(((i=e.query.q)==null?void 0:i.toString())??"");w(o,r),n.value=o.type??"",l.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(l.value=""),f()}y(),G(()=>k.currentRoute.value,()=>{y()});function T(e){const r=X([{name:"type",op:"",value:e}]);b(m,`/calls?q=${K(r)}`)}function q(){b(m,"/calls")}const g=()=>{f()};return P(()=>{h.on("calls_deleted",g)}),j(()=>{h.off("calls_deleted",g)}),(e,r)=>{const i=I,Q=A;return u(),x(Q,null,{title:C(()=>[U(s(e.$t("page_title.calls")),1)]),body:C(()=>[a("ul",Y,[a("li",{class:B({active:!l.value&&!n.value}),onClick:S(q,["prevent"])},[a("span",Z,s(e.$t("all")),1),L(d).calls>=0?(u(),_("span",ee,s(L(d).calls.toLocaleString()),1)):$("",!0)],2),(u(),_(O,null,J(["1","2","3"],t=>a("li",{key:t,class:B({active:t===n.value}),onClick:S(ne=>T(t),["prevent"])},[a("span",ae,s(e.$t(`call_type.${t}`)),1),v(t)>=0?(u(),_("span",se,s(v(t).toLocaleString()),1)):$("",!0)],10,te)),64))]),H(i,{type:"CALL",selected:l.value},null,8,["selected"])]),_:1})}}});export{pe as default};
