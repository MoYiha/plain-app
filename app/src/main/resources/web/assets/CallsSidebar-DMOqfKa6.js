import{_ as A}from"./LeftSidebar.vuevuetypescriptsetuptruelang-xThtdZrs.js";import{_ as I}from"./TagFilter.vuevuetypescriptsetuptruelang-DHeEG-nY.js";import{e as M,f as N,s as R,g as V,G as z,r as d,J as D,w as G,ac as P,a2 as h,ad as j,O as x,o as u,a3 as C,a4 as k,a1 as E,ae as F,a,k as H,c as _,y as S,P as B,j as $,t as s,l as L,R as J,Q as O,Y as U,A as Y,z as w,B as K}from"./index-BEu6YjWH.js";import{u as W}from"./search-Cl5-OtJh.js";import"./more-vert-DqCIvKEs.js";import"./EditValueModal-DSwcFZGr.js";import"./vee-validate-DE4bExDP.js";const X={class:"nav"},Z={class:"title"},ee={key:0,class:"count"},te=["onClick"],ae={class:"title"},se={key:0,class:"count"},_e=M({__name:"CallsSidebar",setup(oe){const m=N(),{counter:p}=R(V()),{parseQ:T}=W(),o=z({tagIds:[]}),n=d(""),l=d(""),c=d(new Map),{fetch:f}=D({handle:e=>{e&&(p.value.calls=e.total,c.value.set("1",e.incoming),c.value.set("2",e.outgoing),c.value.set("3",e.missed))},document:F,variables:()=>({})});function v(e){return c.value.get(e)??-1}function y(){var i;const e=k.currentRoute.value,r=E(((i=e.query.q)==null?void 0:i.toString())??"");T(o,r),n.value=o.type??"",l.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(l.value=""),f()}y(),G(()=>k.currentRoute.value,()=>{y()});function b(e){const r=Y([{name:"type",op:"",value:e}]);w(m,`/calls?q=${K(r)}`)}function q(){w(m,"/calls")}const g=()=>{f()};return P(()=>{h.on("calls_deleted",g)}),j(()=>{h.off("calls_deleted",g)}),(e,r)=>{const i=I,Q=A;return u(),x(Q,null,{title:C(()=>[U(s(e.$t("page_title.calls")),1)]),body:C(()=>[a("ul",X,[a("li",{class:B({active:!l.value&&!n.value}),onClick:S(q,["prevent"])},[a("span",Z,s(e.$t("all")),1),L(p).calls>=0?(u(),_("span",ee,s(L(p).calls.toLocaleString()),1)):$("",!0)],2),(u(),_(O,null,J(["1","2","3"],t=>a("li",{key:t,class:B({active:t===n.value}),onClick:S(ne=>b(t),["prevent"])},[a("span",ae,s(e.$t(`call_type.${t}`)),1),v(t)>=0?(u(),_("span",se,s(v(t).toLocaleString()),1)):$("",!0)],10,te)),64))]),H(i,{type:"CALL",selected:l.value},null,8,["selected"])]),_:1})}}});export{_e as default};
