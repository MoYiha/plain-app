import{r as y,aL as E,u as C,E as S,a1 as N,cr as B}from"./index-CextXMl7.js";const P=r=>{const i=y(!1),c=y(!1),s=y(0),e=y([]),a=y(null),n=y([]),l=y(!1),v=t=>{t?i.value=r.value.every(u=>e.value.includes(u.id)):(i.value=!1,c.value=!1)},f=t=>{const u=Math.min(a.value,t),o=Math.max(a.value,t),g=r.value[a.value].id;return r.value.slice(u,o+1).map(m=>m.id).filter(m=>m!==g)},h=(t,u)=>{if(a.value!==null&&a.value!==u&&n.value.length>0){if(l.value)for(const o of n.value)e.value.includes(o)||e.value.push(o);else e.value=e.value.filter(o=>!n.value.includes(o));n.value=[],a.value=u,l.value=e.value.includes(t.id),v(l)}else d(!e.value.includes(t.id),t,u)},d=(t,u,o)=>{t?e.value.push(u.id):e.value=e.value.filter(g=>g!==u.id),a.value=o,l.value=t,v(t)},p=()=>{i.value=!0,e.value=r.value.map(t=>t.id)};return{realAllChecked:c,allChecked:i,toggleAllChecked:t=>{t.target.checked?p():(i.value=!1,c.value=!1,e.value=[])},selectAll:p,allCheckedAlertVisible:E(()=>i.value&&!c.value&&e.value.length<s.value),selectRealAll:()=>{c.value=!0},clearSelection:()=>{i.value=!1,c.value=!1,e.value=[],a.value=null,l.value=!1,n.value=[]},selectedIds:e,total:s,checked:E(()=>e.value.length>0),shouldSelect:l,shiftEffectingIds:n,toggleSelect:(t,u,o)=>{t.shiftKey?h(u,o):d(!e.value.includes(u.id),u,o)},handleItemClick(t,u,o,g=()=>{}){var k;if(((k=t.target)==null?void 0:k.nodeName)==="V-CHECKBOX")return;const m=window.getSelection();if(!(m&&m.toString())){if(e.value.length===0){g(o);return}t.shiftKey?h(u,o):d(!e.value.includes(u.id),u,o)}},handleMouseOver(t,u){t.shiftKey?a.value!==null&&a.value!==u&&(n.value=f(u)):n.value=[]}}},A=(r,i)=>{const{t:c}=C();return{deleteItems:(s,e,a,n)=>{let l=n;if(!e){if(s.length===0){S(c("select_first"),"error");return}l=`ids:${s.join(",")}`}N(B,{gql:r,count:e?a:s.length,variables:()=>({query:l}),done:i})}}};function K(){const r=document.activeElement;return r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.tagName==="SELECT")}const D=(r,i,c,s,e,a,n)=>({keyDown:l=>{var h,d;if(document.querySelector("md-dialog[open]")||document.getElementsByClassName("lightbox").length>0)return;const v=(h=document.getElementsByClassName("scroll-content"))==null?void 0:h[0];l.shiftKey?v==null||v.style.setProperty("user-select","none"):v==null||v.style.removeProperty("user-select");const f=(d=document.getElementsByClassName("scroller"))==null?void 0:d[0];if(l.shiftKey?f==null||f.style.setProperty("user-select","none"):f==null||f.style.removeProperty("user-select"),(l.ctrlKey||l.metaKey)&&l.key==="a"&&!K()){l.preventDefault(),s();return}if(l.key==="Escape")e();else if(l.key==="ArrowLeft")c.value>1&&a(c.value-1);else if(l.key==="ArrowRight"){const p=Math.ceil(r.value/i);c.value<p&&a(c.value+1)}else(l.key==="Delete"||(l.ctrlKey||l.metaKey)&&l.key==="Backspace")&&n()},keyUp:()=>{var v;const l=(v=document.getElementsByClassName("scroll-content"))==null?void 0:v[0];l==null||l.style.removeProperty("user-select")}}),w=(r,i,c)=>({keyDown:s=>{var n,l;if(document.querySelector("md-dialog[open]"))return;const e=(n=document.getElementsByClassName("scroll-content"))==null?void 0:n[0];s.shiftKey?e==null||e.style.setProperty("user-select","none"):e==null||e.style.removeProperty("user-select");const a=(l=document.getElementsByClassName("scroller"))==null?void 0:l[0];if(s.shiftKey?a==null||a.style.setProperty("user-select","none"):a==null||a.style.removeProperty("user-select"),(s.ctrlKey||s.metaKey)&&s.key==="a"&&!K()){s.preventDefault(),r();return}s.key==="Escape"?i():(s.key==="Delete"||(s.ctrlKey||s.metaKey)&&s.key==="Backspace")&&c()},keyUp:()=>{var e;const s=(e=document.getElementsByClassName("scroll-content"))==null?void 0:e[0];s==null||s.style.removeProperty("user-select")}});export{D as a,A as b,w as c,P as u};
