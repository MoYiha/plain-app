import{_ as q}from"./LeftSidebar.vuevuetypescriptsetuptruelang-BA-ZKiU0.js";import{_ as I}from"./TagFilter-BtANZhAN.js";import{e as M,f as V,s as N,g as Q,I as A,r as _,L as R,w as x,S as z,o as u,p as g,a6 as y,a4 as F,a7 as j,a as t,k as D,c as m,y as h,T as S,j as C,t as a,l as k,V as E,U as G,F as P,B as U,A as B,C as H}from"./index-CuU5w3Fk.js";import{u as J}from"./search-cTEMyIe9.js";import"./more-vert-B9buNtZx.js";const K={class:"nav"},O={class:"title"},W={key:0,class:"count"},X=["onClick"],Y={class:"title"},Z={key:0,class:"count"},le=M({__name:"MessagesSidebar",setup(ee){const d=V(),{counter:p}=N(Q()),{parseQ:T}=J(),o=A({tagIds:[]}),n=_(""),c=_(""),l=_(new Map),{fetch:$}=R({handle:e=>{e&&(p.value.messages=e.total,l.value.set("1",e.inbox),l.value.set("2",e.sent),l.value.set("3",e.drafts))},document:j,variables:()=>({})});function v(e){return l.value.get(e)??-1}function f(){var i;const e=y.currentRoute.value,r=F(((i=e.query.q)==null?void 0:i.toString())??"");T(o,r),n.value=o.type??"",c.value=o.tagIds.length===1?o.tagIds[0]:"",n.value&&(c.value=""),$()}f(),x(()=>y.currentRoute.value,()=>{f()});function b(e){const r=U([{name:"type",op:"",value:e}]);B(d,`/messages?q=${H(r)}`)}function w(){B(d,"/messages")}return(e,r)=>{const i=I,L=q;return u(),z(L,null,{title:g(()=>[P(a(e.$t("page_title.messages")),1)]),body:g(()=>[t("ul",K,[t("li",{class:S({active:!c.value&&!n.value}),onClick:h(w,["prevent"])},[t("span",O,a(e.$t("all")),1),k(p).messages>=0?(u(),m("span",W,a(k(p).messages.toLocaleString()),1)):C("",!0)],2),(u(),m(G,null,E(["1","2","3"],s=>t("li",{key:s,class:S({active:s===n.value}),onClick:h(se=>b(s),["prevent"])},[t("span",Y,a(e.$t(`message_type.${s}`)),1),v(s)>=0?(u(),m("span",Z,a(v(s).toLocaleString()),1)):C("",!0)],10,X)),64))]),D(i,{type:"SMS",selected:c.value},null,8,["selected"])]),_:1})}}});export{le as default};
