import{e as P,c as d,o as y,a as _,j as K,c3 as B,Z as S,$ as N,J as w,r as m,aT as I,u as A,F as D,a2 as q,cB as M}from"./index-BAdglffH.js";const T={class:"skeleton-item-phone selectable-card-skeleton"},F={class:"phone-left"},V={key:0,class:"skeleton-image"},L={class:"phone-content"},R={class:"subtitle-container"},U={key:0,class:"actions"},$=P({__name:"SkeletonItemPhone",props:{titleWidth:{default:"70%"},subtitles:{default:()=>[{width:"60%",height:"18px"}]},actionCount:{default:0},image:{type:Boolean,default:!0}},setup(r){return(n,o)=>(y(),d("section",T,[_("div",F,[o[0]||(o[0]=_("div",{class:"skeleton-checkbox"},null,-1)),n.image?(y(),d("div",V)):K("",!0)]),_("div",L,[_("div",{class:"title skeleton-text",style:B({width:n.titleWidth})},null,4),_("div",R,[(y(!0),d(S,null,N(n.subtitles,(t,e)=>(y(),d("div",{key:e,class:"subtitle skeleton-text",style:B({width:t.width,height:t.height||"16px"})},null,4))),128))]),n.actionCount?(y(),d("div",U,[(y(!0),d(S,null,N(n.actionCount,t=>(y(),d("div",{key:t,class:"skeleton-action-square"}))),128))])):K("",!0)])]))}}),O=w($,[["__scopeId","data-v-56b28efa"]]),W=r=>{const n=m(!1),o=m(!1),t=m(0),e=m([]),a=m(null),c=m([]),l=m(!1),v=s=>{s?n.value=r.value.every(u=>e.value.includes(u.id)):(n.value=!1,o.value=!1)},f=s=>{const u=Math.min(a.value,s),i=Math.max(a.value,s),k=r.value[a.value].id;return r.value.slice(u,i+1).map(p=>p.id).filter(p=>p!==k)},g=(s,u)=>{if(a.value!==null&&a.value!==u&&c.value.length>0){if(l.value)for(const i of c.value)e.value.includes(i)||e.value.push(i);else e.value=e.value.filter(i=>!c.value.includes(i));c.value=[],a.value=u,l.value=e.value.includes(s.id),v(l)}else h(!e.value.includes(s.id),s,u)},h=(s,u,i)=>{s?e.value.push(u.id):e.value=e.value.filter(k=>k!==u.id),a.value=i,l.value=s,v(s)},C=()=>{n.value=!0,e.value=r.value.map(s=>s.id)};return{realAllChecked:o,allChecked:n,toggleAllChecked:s=>{s.target.checked?C():(n.value=!1,o.value=!1,e.value=[])},selectAll:C,allCheckedAlertVisible:I(()=>n.value&&!o.value&&e.value.length<t.value),selectRealAll:()=>{o.value=!0},clearSelection:()=>{n.value=!1,o.value=!1,e.value=[],a.value=null,l.value=!1,c.value=[]},selectedIds:e,total:t,checked:I(()=>e.value.length>0),shouldSelect:l,shiftEffectingIds:c,toggleSelect:(s,u,i)=>{s.shiftKey?g(u,i):h(!e.value.includes(u.id),u,i)},handleItemClick(s,u,i,k=()=>{}){var E;if(((E=s.target)==null?void 0:E.nodeName)==="V-CHECKBOX")return;const p=window.getSelection();if(!(p&&p.toString())){if(e.value.length===0){k(i);return}s.shiftKey?g(u,i):h(!e.value.includes(u.id),u,i)}},handleMouseOver(s,u){s.shiftKey?a.value!==null&&a.value!==u&&(c.value=f(u)):c.value=[]}}},X=(r,n)=>{const{t:o}=A();return{deleteItems:(t,e,a,c)=>{let l=c;if(!e){if(t.length===0){D(o("select_first"),"error");return}l=`ids:${t.join(",")}`}q(M,{gql:r,count:e?a:t.length,variables:()=>({query:l}),done:n})}}};function b(){const r=document.activeElement;return r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.tagName==="SELECT")}const z=(r,n,o,t,e,a,c)=>({keyDown:l=>{var g,h;if(document.querySelector("md-dialog[open]")||document.getElementsByClassName("lightbox").length>0)return;const v=(g=document.getElementsByClassName("scroll-content"))==null?void 0:g[0];l.shiftKey?v==null||v.style.setProperty("user-select","none"):v==null||v.style.removeProperty("user-select");const f=(h=document.getElementsByClassName("scroller"))==null?void 0:h[0];if(l.shiftKey?f==null||f.style.setProperty("user-select","none"):f==null||f.style.removeProperty("user-select"),(l.ctrlKey||l.metaKey)&&l.key==="a"&&!b()){l.preventDefault(),t();return}if(l.key==="Escape")e();else if(l.key==="ArrowLeft")o.value>1&&a(o.value-1);else if(l.key==="ArrowRight"){const C=Math.ceil(r.value/n);o.value<C&&a(o.value+1)}else(l.key==="Delete"||(l.ctrlKey||l.metaKey)&&l.key==="Backspace")&&c()},keyUp:()=>{var v;const l=(v=document.getElementsByClassName("scroll-content"))==null?void 0:v[0];l==null||l.style.removeProperty("user-select")}}),H=(r,n,o)=>({keyDown:t=>{var c,l;if(document.querySelector("md-dialog[open]"))return;const e=(c=document.getElementsByClassName("scroll-content"))==null?void 0:c[0];t.shiftKey?e==null||e.style.setProperty("user-select","none"):e==null||e.style.removeProperty("user-select");const a=(l=document.getElementsByClassName("scroller"))==null?void 0:l[0];if(t.shiftKey?a==null||a.style.setProperty("user-select","none"):a==null||a.style.removeProperty("user-select"),(t.ctrlKey||t.metaKey)&&t.key==="a"&&!b()){t.preventDefault(),r();return}t.key==="Escape"?n():(t.key==="Delete"||(t.ctrlKey||t.metaKey)&&t.key==="Backspace")&&o()},keyUp:()=>{var e;const t=(e=document.getElementsByClassName("scroll-content"))==null?void 0:e[0];t==null||t.style.removeProperty("user-select")}});export{O as _,z as a,X as b,H as c,W as u};
