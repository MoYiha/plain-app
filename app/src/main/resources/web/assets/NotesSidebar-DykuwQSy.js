import{_ as $}from"./LeftSidebar.vuevuetypescriptsetuptruelang-DYd2K07C.js";import{_ as q}from"./TagFilter.vuevuetypescriptsetuptruelang-C_Wf4vHu.js";import{e as A,f as I,s as L,g as Q,G as V,r as f,J as z,w as M,ac as R,a2 as h,ad as E,O as G,o as i,a3 as v,a4 as g,a1 as O,bo as P,a as s,k as j,y,P as S,c as T,j as k,t as a,l,Y as x,A as D,z as B,B as H}from"./index-BOocQAqZ.js";import{u as J}from"./search-DtIxMFMN.js";import"./more-vert-B5fpIejl.js";import"./EditValueModal-DxNlfUr3.js";import"./vee-validate-CU2Cxe7k.js";const U={class:"nav"},Y={class:"title"},F={key:0,class:"count"},K={class:"title"},W={key:0,class:"count"},re=A({__name:"NotesSidebar",setup(X){const u=I(),{counter:t}=L(Q()),{parseQ:C}=J(),o=V({tagIds:[]}),n=f(!1),r=f(""),{fetch:d}=z({handle:e=>{e&&(t.value.notes=e.total,t.value.notesTrash=e.trash)},document:P,variables:()=>({})});function _(){var c;const e=g.currentRoute.value,m=O(((c=e.query.q)==null?void 0:c.toString())??"");C(o,m),r.value=o.tagIds.length===1?o.tagIds[0]:"",n.value=o.trash??!1,n.value&&(r.value=""),d()}_(),M(()=>g.currentRoute.value,()=>{_()});function b(){const e=D([{name:"trash",op:"",value:"true"}]);B(u,`/notes?q=${H(e)}`)}function w(){B(u,"/notes")}const p=()=>{d()};return R(()=>{h.on("notes_actioned",p)}),E(()=>{h.off("notes_actioned",p)}),(e,m)=>{const c=q,N=$;return i(),G(N,null,{title:v(()=>[x(a(e.$t("page_title.notes")),1)]),body:v(()=>[s("ul",U,[s("li",{class:S({active:!r.value&&!n.value}),onClick:y(w,["prevent"])},[s("span",Y,a(e.$t("all")),1),l(t).notes>=0?(i(),T("span",F,a(l(t).notes.toLocaleString()),1)):k("",!0)],2),s("li",{class:S({active:n.value}),onClick:y(b,["prevent"])},[s("span",K,a(e.$t("trash")),1),l(t).notesTrash>=0?(i(),T("span",W,a(l(t).notesTrash.toLocaleString()),1)):k("",!0)],2)]),j(c,{type:"NOTE",selected:r.value},null,8,["selected"])]),_:1})}}});export{re as default};
